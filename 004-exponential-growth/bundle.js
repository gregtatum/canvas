(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,a=void 0;try{for(var o,d=e[Symbol.iterator]();!(n=(o=d.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Simplex=require(13),setupRandom=require(6),initializeShortcuts=require(4),_require=require(2),setupCanvas=_require.setupCanvas,loop=_require.loop,generateSeed=_require.generateSeed,_require2=require(3),lerpTheta=_require2.lerpTheta,lerp=require(8),createRtree=require(10),ease=require(7),TAU=2*Math.PI,seed=generateSeed(),random=setupRandom(seed),simplex=new Simplex(random),simplex3=simplex.noise3D.bind(simplex),ctx=setupCanvas();initializeShortcuts(seed);var config={ctx:ctx,seed:seed,random:random,simplex3:simplex3,entityWanderSimplexRatio:1e-4,maxEntityCount:1e3,entityLiveCount:30,entitySize:10,entitySlowDown:.5,entitySpeedUp:.01,entityThetaJitterRange:.05,entityBaseSpeed:2,entitySubdivideEnergyLevel:100,entityMinLiving:5,entityMinSpeed:.5,entityMaxSpeed:2.5,entitySearchRadius:100,entityLerpThetaT:.05,entityFeedRate:.7,entityCostToMove:.1,deadTimeDecomposing:5,deadSpeedSlowdown:.97,foodCount:50,minFoodGrowthRate:1.001,maxFoodGrowthRate:1.005,minFoodQuantity:20,maxFoodQuantity:2e3,foodDrawnSize:2,foodDrawnSteps:4,minFeedQuantity:5,foodSimplexDistribution:500},rtree=createRtree(),_generateEntities=generateEntities(config),entities=_generateEntities.entities,livingEntities=_generateEntities.livingEntities,deadEntities=_generateEntities.deadEntities,current={rtree:rtree,entities:entities,livingEntities:livingEntities,deadEntities:deadEntities,recentlyDead:new Set,foods:generateFood(config,rtree),now:Date.now(),dt:0};function updateFoods(e,t){var i=!0,n=!1,r=void 0;try{for(var a,o=t.foods[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var d=a.value;d.quantity=Math.min(d.quantity=Math.pow(d.quantity,d.growthRate),d.maxFoodQuantity)}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}}function updateEntities(e,t){var i=t.livingEntities,n=e.ctx,r=e.entityMaxSpeed,a=e.entityCostToMove,o=n.canvas,d=o.width,y=o.height,l=!0,u=!1,s=void 0;try{for(var c,v=i[Symbol.iterator]();!(l=(c=v.next()).done);l=!0){var h=c.value,f=getClosestFood(e,t,h);f&&f.quantity>10?moveToFood(e,h,f):wander(e,h),h.speed=Math.min(h.speed,r),h.energy-=h.speed*a,h.energy=Math.max(0,h.energy),h.x+=Math.cos(h.theta)*h.speed,h.y+=Math.sin(h.theta)*h.speed,keepEntityInRange(e,d,y,h),maybeSubdivideEntity(e,t,h),maybeKillEntity(e,t,h)}}catch(e){u=!0,s=e}finally{try{l||null==v.return||v.return()}finally{if(u)throw s}}}function updateRecentlyDead(e,t){var i=e.deadSpeedSlowdown,n=e.deadTimeDecomposing,r=t.recentlyDead,a=t.dt,o=!0,d=!1,y=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;s.age-=a,s.age<=0&&r.delete(s),s.speed*=i,s.x+=Math.cos(s.theta)*s.speed,s.y+=Math.sin(s.theta)*s.speed,s.energy=s.energyAtDeath*(s.age/n)}}catch(e){d=!0,y=e}finally{try{o||null==u.return||u.return()}finally{if(d)throw y}}}function wander(e,t){var i=e.entityLerpThetaT,n=e.entitySpeedUp,r=e.entityMinSpeed,a=e.simplex3,o=e.entityWanderSimplexRatio;t.speed*=1+n,t.speed=Math.max(r,t.speed);var d=Math.PI*a(t.x*o,t.y*o,t.index);t.theta=lerpTheta(t.theta,d,i)+t.thetaJitter}function moveToFood(e,t,i){var n=e.entitySlowDown,r=e.entityLerpThetaT,a=e.entityFeedRate,o=t.x-i.x,d=t.y-i.y,y=o*o+d*d,l=Math.atan2(i.y-t.y,i.x-t.x);t.speed/=1+n*i.quantity/y,t.energy+=a,i.quantity-=a,t.theta=lerpTheta(t.theta,l,r)}function getClosestFood(e,t,i){var n,r,a=i.x,o=i.y,d=t.rtree,y=e.entitySearchRadius,l=e.minFeedQuantity,u=d.bbox(a-y,o-y,a+y,o+y);if(0===u.length)return null;var s=!0,c=!1,v=void 0;try{for(var h,f=u[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var p=h.value;if(!(p.quantity<l)){var x=a-p.x,g=o-p.y,m=x*x+g*g;n?m/p.quantity<r/n.quantity&&(n=p):(n=p,r=m)}}}catch(e){c=!0,v=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw v}}return n}function keepEntityInRange(e,t,i,n){var r=e.entitySize;n.x<-r?n.x=t+r:n.x>t+r&&(n.x=-r),n.y<-r?n.y=i+r:n.y>i+r&&(n.y=-r)}function maybeSubdivideEntity(e,t,i){var n=e.entitySubdivideEnergyLevel,r=e.random,a=t.deadEntities,o=t.livingEntities;if(!(i.energy<n))if(0!==a.size){var d=_slicedToArray(a.entries().next().value,1)[0];a.delete(d),o.add(d),i.energy=n/r(3,4),d.energy=n/r(3,4),d.x=i.x,d.y=i.y,i.speed=0,d.speed=0,d.theta+=r(TAU),d.x+=r(-5,5)*devicePixelRatio}else i.energy=n}function maybeKillEntity(e,t,i){var n=e.deadTimeDecomposing,r=t.livingEntities,a=t.deadEntities,o=t.entityMinLiving,d=t.recentlyDead;r.size<=o||i.energy<=0&&(a.add(i),r.delete(i),d.add({x:i.x,y:i.y,theta:i.theta,speed:i.speed,energy:i.energy,energyAtDeath:i.energy,age:n}))}function generateEntities(e){for(var t=e.maxEntityCount,i=e.entityLiveCount,n=e.ctx,r=e.entityBaseSpeed,a=e.random,o=e.entitySubdivideEnergyLevel,d=e.entityThetaJitterRange,y=n.canvas,l=y.width,u=y.height,s=[],c=new Set,v=new Set,h=0;h<t;h++){var f={index:h,x:(ease(a(1,0))+.5)%1*l,y:a(u),energy:a(o/2,o),theta:a(TAU),speed:r,thetaJitter:a(-d,d)};s.push(f),h<i?c.add(f):v.add(f)}return{entities:s,livingEntities:c,deadEntities:v}}function draw(e,t){var i=e.ctx;i.fillStyle="#000",i.fillRect(0,0,i.canvas.width,i.canvas.height),drawFoods(e,t),i.strokeStyle="#fff",drawEnties(e,t.livingEntities),i.strokeStyle="#833",drawEnties(e,t.recentlyDead)}function drawFoods(e,t){var i=e.ctx,n=e.foodDrawnSize,r=e.foodDrawnSteps,a=t.foods;i.fillStyle="#07f6";var o=!0,d=!1,y=void 0;try{for(var l,u=a[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)for(var s=l.value,c=s.quantity,v=s.x,h=s.y,f=Math.max(2*devicePixelRatio,Math.sqrt(c)*n),p=1;p<=r;p++){var x=f*Math.pow(p/r,2);i.fillRect(v-.5*x,h-.5*x,x,x)}}catch(e){d=!0,y=e}finally{try{o||null==u.return||u.return()}finally{if(d)throw y}}}function drawEnties(e,t){var i=e.ctx,n=e.entitySubdivideEnergyLevel,r=e.entitySize;i.lineWidth=2*devicePixelRatio,i.beginPath();var a=!0,o=!1,d=void 0;try{for(var y,l=t[Symbol.iterator]();!(a=(y=l.next()).done);a=!0){var u=y.value,s=u.x,c=u.y,v=u.theta,h=u.energy/n,f=devicePixelRatio*lerp(r/4,r,h*h),p=Math.cos(v)*f,x=Math.sin(v)*f;i.moveTo(s,c),i.lineTo(s-p,c-x)}}catch(e){o=!0,d=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw d}}i.stroke()}function generateFood(e,t){for(var i=e.minFoodQuantity,n=e.maxFoodQuantity,r=e.minFoodGrowthRate,a=e.maxFoodGrowthRate,o=e.foodSimplexDistribution,d=e.random,y=e.foodCount,l=e.simplex3,u=e.ctx.canvas,s=u.width,c=u.height,v=[],h=0;h<y;h++){var f=d()*s,p=d()*c,x=i+(n-i)*(.5*l(f/o,p/o,0)+.5);v.push({maxFoodQuantity:x,quantity:d()*x,x:f,y:p,growthRate:d(r,a)})}return addFoodsToRtree(v,t),v}function addFoodsToRtree(e,t){var i=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var d=a.value;t.insert({x:d.x-.5,y:d.y-.5,w:1,h:1},d)}}catch(e){n=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw r}}}loop(function(e){current.dt=e-current.time,current.time=e,updateFoods(config,current),updateEntities(config,current),updateRecentlyDead(config,current),draw(config,current)}),window.addEventListener("resize",function(){current.rtree=createRtree();var e=!0,t=!1,i=void 0;try{for(var n,r=current.foods[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var a=n.value;a.x=random()*ctx.canvas.width,a.y=random()*ctx.canvas.height}}catch(e){t=!0,i=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}addFoodsToRtree(current.foods,current.rtree)}),window.current=current,window.config=config;

},{"10":10,"13":13,"2":2,"3":3,"4":4,"6":6,"7":7,"8":8}],2:[function(require,module,exports){
"use strict";var lerp=require(8);function setupCanvas(){var e=document.createElement("canvas");function n(){e.width=window.innerWidth*devicePixelRatio,e.height=window.innerHeight*devicePixelRatio}return document.body.appendChild(e),n(),window.addEventListener("resize",n,!1),e.getContext("2d",{alpha:!1})}function loop(e){var n=Date.now();requestAnimationFrame(function t(){e((Date.now()-n)/1e3),requestAnimationFrame(t)})}function generateSeed(){var e=window.location.hash.substr(1)||String(Math.random()).split(".")[1];return console.log("current seed",e),window.onhashchange=function(){location.reload()},e}var TAU=Math.PI;function lerpTheta(e,n,t){return(n=(n%TAU+TAU)%TAU)-(e=(e%TAU+TAU)%TAU)>Math.PI&&(e+=TAU),lerp(e,n,t)}module.exports={setupCanvas:setupCanvas,loop:loop,generateSeed:generateSeed,lerpTheta:lerpTheta};

},{"8":8}],3:[function(require,module,exports){
"use strict";var lerp=require(8),PI=Math.PI,TAU=2*Math.PI;function lerpTheta(e,r,T){return(r=(r%TAU+TAU)%TAU)-(e=(e%TAU+TAU)%TAU)>PI&&(e+=TAU),lerp(e,r,T)}module.exports={lerpTheta:lerpTheta};

},{"8":8}],4:[function(require,module,exports){
"use strict";function _click(e){var n=document.querySelector(e);n&&n.click()}module.exports=function(e,n){console.log(["Available shortcuts:","f: enter fullscreen","h: hide the ui","r: reload the ui","s: create a screenshot link","u: save the current seed to the URL","left: previous session","right: next session"].join("\n")),window.addEventListener("keydown",function(t){switch(t.key){case"h":document.body.classList.toggle("hide-ui");break;case"r":window.location.reload();break;case"s":var o=document.querySelector("canvas");if(!o){console.log("Could not find a canvas element to screenshot");break}var c=document.querySelector(".download-link");c||((c=document.createElement("a")).className="download-link",document.body.appendChild(c),c.innerHTML="Download Screenshot",c.target="_blank",c.addEventListener("click",function(){c.style.display="none"})),c.href=o.toDataURL(),c.style.display="inline-block";break;case"u":history.pushState(null,document.title,window.location.pathname+"#"+e);break;case"f":if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var l=document.querySelector("canvas");l.requestFullscreen&&l.requestFullscreen()}n&&n();break;case"ArrowLeft":_click("#prev");break;case"ArrowRight":_click("#next")}},!1)};

},{}],5:[function(require,module,exports){
function _mashFn(){var r=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var e=.02519603282416938*(r+=n.charCodeAt(t));e-=r=e>>>0,r=(e*=r)>>>0,r+=4294967296*(e-=r)}return 2.3283064365386963e-10*(r>>>0)}}module.exports=function(){var r=Array.prototype.slice.call(arguments),n=0,t=0,e=0,a=1;0===r.length&&(r=[+new Date]);var o=_mashFn();n=t=e=o(" ");for(var u=0;u<r.length;u++)(n-=o(r[u]))<0&&(n+=1),(t-=o(r[u]))<0&&(t+=1),(e-=o(r[u]))<0&&(e+=1);return function(){var r=2091639*n+2.3283064365386963e-10*a;return n=t,t=e,e=r-(a=0|r)}};

},{}],6:[function(require,module,exports){
var Alea=require(5);module.exports=function(){var r=Alea.apply(this,arguments);return function(e,a,n){a=void 0===a?1:a;var t=(e=void 0===e?0:e)+r()*(a-e);return n?parseInt(t,10):t}};

},{"5":5}],7:[function(require,module,exports){
function sineInOut(n){return-.5*(Math.cos(Math.PI*n)-1)}module.exports=sineInOut;

},{}],8:[function(require,module,exports){
function lerp(e,r,l){return e*(1-l)+r*l}module.exports=lerp;

},{}],9:[function(require,module,exports){
"use strict";var rectangle=require(11),bbox=function(e,o){if(o&&o.bbox)return{leaf:o,x:o.bbox[0],y:o.bbox[1],w:o.bbox[2]-o.bbox[0],h:o.bbox[3]-o.bbox[1]};for(var t=e.length,r=0,n=new Array(t);r<t;)n[r]=[e[r][0],e[r][1]],r++;var a=n[0];t=n.length,r=1;for(var i={min:[].concat(a),max:[].concat(a)};r<t;)n[r][0]<i.min[0]?i.min[0]=n[r][0]:n[r][0]>i.max[0]&&(i.max[0]=n[r][0]),n[r][1]<i.min[1]?i.min[1]=n[r][1]:n[r][1]>i.max[1]&&(i.max[1]=n[r][1]),r++;var c={x:i.min[0],y:i.min[1],w:i.max[0]-i.min[0],h:i.max[1]-i.min[1]};return o&&(c.leaf=o),c},geoJSON={point:function(e,o){return o.insertSubtree({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],w:0,h:0,leaf:e},o.root)},multiPointLineString:function(e,o){return o.insertSubtree(bbox(e.geometry.coordinates,e),o.root)},multiLineStringPolygon:function(e,o){return o.insertSubtree(bbox(Array.prototype.concat.apply([],e.geometry.coordinates),e),o.root)},multiPolygon:function(e,o){return o.insertSubtree(bbox(Array.prototype.concat.apply([],Array.prototype.concat.apply([],e.geometry.coordinates)),e),o.root)},makeRec:function(e){return rectangle(e.x,e.y,e.w,e.h)},geometryCollection:function(e,o){if(e.bbox)return o.insertSubtree({leaf:e,x:e.bbox[0],y:e.bbox[1],w:e.bbox[2]-e.bbox[0],h:e.bbox[3]-e.bbox[1]},o.root);for(var t,r=e.geometry.geometries,n=0,a=r.length,i=[];n<a;){switch((t=r[n]).type){case"Point":i.push(geoJSON.makeRec({x:t.coordinates[0],y:t.coordinates[1],w:0,h:0}));break;case"MultiPoint":case"LineString":i.push(geoJSON.makeRec(bbox(t.coordinates)));break;case"MultiLineString":case"Polygon":i.push(geoJSON.makeRec(bbox(Array.prototype.concat.apply([],t.coordinates))));break;case"MultiPolygon":i.push(geoJSON.makeRec(bbox(Array.prototype.concat.apply([],Array.prototype.concat.apply([],t.coordinates)))));break;case"GeometryCollection":a=(r=r.concat(t.geometries)).length}n++}var c=i[0];for(n=1,a=i.length;n<a;)c.expand(i[n]),n++;return o.insertSubtree({leaf:e,x:c.x(),y:c.y(),h:c.h(),w:c.w()},o.root)}};exports.geoJSON=function(e){var o,t;if(Array.isArray(e))o=e.slice();else if(e.features&&Array.isArray(e.features))o=e.features.slice();else{if(!(e instanceof Object))throw"this isn't what we're looking for";o=[e]}for(var r=o.length,n=0;n<r;){if("Feature"===(t=o[n]).type)switch(t.geometry.type){case"Point":geoJSON.point(t,this);break;case"MultiPoint":case"LineString":geoJSON.multiPointLineString(t,this);break;case"MultiLineString":case"Polygon":geoJSON.multiLineStringPolygon(t,this);break;case"MultiPolygon":geoJSON.multiPolygon(t,this);break;case"GeometryCollection":geoJSON.geometryCollection(t,this)}n++}},exports.bbox=function(){var e,o,t,r;switch(arguments.length){case 1:e=arguments[0][0][0],o=arguments[0][0][1],t=arguments[0][1][0],r=arguments[0][1][1];break;case 2:e=arguments[0][0],o=arguments[0][1],t=arguments[1][0],r=arguments[1][1];break;case 4:e=arguments[0],o=arguments[1],t=arguments[2],r=arguments[3]}return this.search({x:e,y:o,w:t-e,h:r-o})};

},{"11":11}],10:[function(require,module,exports){
"use strict";var RTree=require(12),geojson=require(9);RTree.prototype.bbox=geojson.bbox,RTree.prototype.geoJSON=geojson.geoJSON,RTree.Rectangle=require(11),module.exports=RTree;

},{"11":11,"12":12,"9":9}],11:[function(require,module,exports){
"use strict";function Rectangle(n,t,e,r){if(!(this instanceof Rectangle))return new Rectangle(n,t,e,r);var x,i,u;n.x?(e=n.w,r=n.h,t=n.y,0!==n.w&&!n.w&&n.x2?(e=n.x2-n.x,r=n.y2-n.y):(e=n.w,r=n.h),n=n.x,x=n+e,i=t+r,u=!(r+e)):(x=n+e,i=t+r,u=!(r+e)),this.x1=this.x=function(){return n},this.y1=this.y=function(){return t},this.x2=function(){return x},this.y2=function(){return i},this.w=function(){return e},this.h=function(){return r},this.p=function(){return u},this.overlap=function(e){return u||e.p()?n<=e.x2()&&x>=e.x()&&t<=e.y2()&&i>=e.y():n<e.x2()&&x>e.x()&&t<e.y2()&&i>e.y()},this.expand=function(u){var y,c,h=u.x(),a=u.y(),o=u.x2(),f=u.y2();return y=n>h?h:n,c=t>a?a:t,e=x>o?x-y:o-y,r=i>f?i-c:f-c,n=y,t=c,this}}Rectangle.overlapRectangle=function(n,t){return 0===n.h&&0===n.w||0===t.h&&0===t.w?n.x<=t.x+t.w&&n.x+n.w>=t.x&&n.y<=t.y+t.h&&n.y+n.h>=t.y:n.x<t.x+t.w&&n.x+n.w>t.x&&n.y<t.y+t.h&&n.y+n.h>t.y},Rectangle.containsRectangle=function(n,t){return n.x+n.w<=t.x+t.w&&n.x>=t.x&&n.y+n.h<=t.y+t.h&&n.y>=t.y},Rectangle.expandRectangle=function(n,t){var e,r,x=n.x+n.w,i=t.x+t.w,u=n.y+n.h,y=t.y+t.h;return e=n.x>t.x?t.x:n.x,r=n.y>t.y?t.y:n.y,n.w=x>i?x-e:i-e,n.h=u>y?u-r:y-r,n.x=e,n.y=r,n},Rectangle.makeMBR=function(n,t){if(!n.length)return{x:0,y:0,w:0,h:0};(t=t||{}).x=n[0].x,t.y=n[0].y,t.w=n[0].w,t.h=n[0].h;for(var e=1,r=n.length;e<r;e++)Rectangle.expandRectangle(t,n[e]);return t},Rectangle.squarifiedRatio=function(n,t,e){var r=(n+t)/2,x=n*t;return x*e/(x/(r*r))},module.exports=Rectangle;

},{}],12:[function(require,module,exports){
"use strict";var rectangle=require(11);function RTree(e){if(!(this instanceof RTree))return new RTree(e);var n=3,t=6;isNaN(e)||(n=Math.floor(e/2),t=e);var r={x:0,y:0,w:0,h:0,id:"root",nodes:[]};this.root=r;var a=function(e){for(var n,t=e.slice(),r=[];t.length;)(n=t.pop()).nodes?t=t.concat(n.nodes):n.leaf&&r.push(n);return r},s=function(e,t,r){var s,o,h,i=[],d=[],g=[];if(!e||!rectangle.overlapRectangle(e,r))return g;var f={x:e.x,y:e.y,w:e.w,h:e.h,target:t};for(d.push(r.nodes.length),i.push(r);i.length>0;){if(s=i.pop(),o=d.pop()-1,"target"in f)for(;o>=0;){if(h=s.nodes[o],rectangle.overlapRectangle(f,h)){if(f.target&&"leaf"in h&&h.leaf===f.target||!f.target&&("leaf"in h||rectangle.containsRectangle(h,f))){g="nodes"in h?a(s.nodes.splice(o,1)):s.nodes.splice(o,1),rectangle.makeMBR(s.nodes,s),delete f.target;break}"nodes"in h&&(0,d.push(o),i.push(s),s=h,o=h.nodes.length)}o--}else if("nodes"in f){s.nodes.splice(o+1,1),s.nodes.length>0&&rectangle.makeMBR(s.nodes,s);for(var u=0;u<f.nodes.length;u++)c(f.nodes[u],s);f.nodes=[],0===i.length&&s.nodes.length<=1?(f.nodes=l(s,!0,f.nodes,s),s.nodes=[],i.push(s),d.push(1)):i.length>0&&s.nodes.length<n?(f.nodes=l(s,!0,f.nodes,s),s.nodes=[]):delete f.nodes}else rectangle.makeMBR(s.nodes,s);1}return g},o=function(e){for(var n=i(e);e.length>0;)h(e,n[0],n[1]);return n},h=function(e,t,r){for(var a,s,o,h=rectangle.squarifiedRatio(t.w,t.h,t.nodes.length+1),i=rectangle.squarifiedRatio(r.w,r.h,r.nodes.length+1),l=e.length-1;l>=0;l--){var c=e[l],d={};d.x=Math.min(t.x,c.x),d.y=Math.min(t.y,c.y),d.w=Math.max(t.x+t.w,c.x+c.w)-d.x,d.h=Math.max(t.y+t.h,c.y+c.h)-d.y;var g=Math.abs(rectangle.squarifiedRatio(d.w,d.h,t.nodes.length+2)-h),f={};f.x=Math.min(r.x,c.x),f.y=Math.min(r.y,c.y),f.w=Math.max(r.x+r.w,c.x+c.w)-f.x,f.h=Math.max(r.y+r.h,c.y+c.h)-f.y;var u=Math.abs(rectangle.squarifiedRatio(f.w,f.h,r.nodes.length+2)-i);(!s||!a||Math.abs(u-g)<a)&&(s=l,a=Math.abs(u-g),o=u<g?r:t)}var p=e.splice(s,1)[0];t.nodes.length+e.length+1<=n?(t.nodes.push(p),rectangle.expandRectangle(t,p)):r.nodes.length+e.length+1<=n?(r.nodes.push(p),rectangle.expandRectangle(r,p)):(o.nodes.push(p),rectangle.expandRectangle(o,p))},i=function(e){for(var n,t,r=e.length-1,a=0,s=e.length-1,o=0,h=e.length-2;h>=0;h--){var i=e[h];i.x>e[a].x?a=h:i.x+i.w<e[r].x+e[r].w&&(r=h),i.y>e[o].y?o=h:i.y+i.h<e[s].y+e[s].h&&(s=h)}return Math.abs(e[r].x+e[r].w-e[a].x)>Math.abs(e[s].y+e[s].h-e[o].y)?r>a?(n=e.splice(r,1)[0],t=e.splice(a,1)[0]):(t=e.splice(a,1)[0],n=e.splice(r,1)[0]):s>o?(n=e.splice(s,1)[0],t=e.splice(o,1)[0]):(t=e.splice(o,1)[0],n=e.splice(s,1)[0]),[{x:n.x,y:n.y,w:n.w,h:n.h,nodes:[n]},{x:t.x,y:t.y,w:t.w,h:t.h,nodes:[t]}]},l=function(e,n,t,r){var a=[];if(!rectangle.overlapRectangle(e,r))return t;for(a.push(r.nodes);a.length>0;)for(var s=a.pop(),o=s.length-1;o>=0;o--){var h=s[o];rectangle.overlapRectangle(e,h)&&("nodes"in h?a.push(h.nodes):"leaf"in h&&(n?t.push(h):t.push(h.leaf)))}return t},c=function(e,n){var r;if(0===n.nodes.length)return n.x=e.x,n.y=e.y,n.w=e.w,n.h=e.h,void n.nodes.push(e);for(var a,s=function(e,n){var t,r=-1,a=[],s=!0;a.push(n);for(var o=n.nodes;s||-1!==r;){s?s=!1:(a.push(o[r]),o=o[r].nodes,r=-1);for(var h=o.length-1;h>=0;h--){var i=o[h];if("leaf"in i){r=-1;break}var l=rectangle.squarifiedRatio(i.w,i.h,i.nodes.length+1),c=Math.max(i.x+i.w,e.x+e.w)-Math.min(i.x,e.x),d=Math.max(i.y+i.h,e.y+e.h)-Math.min(i.y,e.y),g=rectangle.squarifiedRatio(c,d,i.nodes.length+2);(r<0||Math.abs(g-l)<t)&&(t=Math.abs(g-l),r=h)}}return a}(e,n),h=e;s.length>0;){if(r&&"nodes"in r&&0===r.nodes.length){a=r,r=s.pop();for(var i=0;i<r.nodes.length;i++)if(r.nodes[i]===a||0===r.nodes[i].nodes.length){r.nodes.splice(i,1);break}}else r=s.pop();if("leaf"in h||"nodes"in h||Array.isArray(h)){if(Array.isArray(h)){for(var l=0;l<h.length;l++)rectangle.expandRectangle(r,h[l]);r.nodes=r.nodes.concat(h)}else rectangle.expandRectangle(r,h),r.nodes.push(h);if(r.nodes.length<=t)h={x:r.x,y:r.y,w:r.w,h:r.h};else{var c=o(r.nodes);h=c,s.length<1&&(r.nodes.push(c[0]),s.push(r),h=c[1])}}else rectangle.expandRectangle(r,h),h={x:r.x,y:r.y,w:r.w,h:r.h}}};this.insertSubtree=c,this.getTree=function(){return r},this.setTree=function(e,n){return n||(n=r),a=e,(t=n).nodes=a.nodes,t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h,t;var t,a},this.search=function(e,n,t){return l(e,n,t=t||[],r)};this.remove=function(e,n){return n&&"function"!=typeof n?function(e,n){return s(e,n,r)}(e,n):function(e){for(var n,t=1,a=[];t>0;)t=(n=s(e,!1,r)).length,a=a.concat(n);return a}(e)},this.insert=function(e,n){return c({x:e.x,y:e.y,w:e.w,h:e.h,leaf:n},r)}}RTree.prototype.toJSON=function(e){return JSON.stringify(this.root,!1,e)},RTree.fromJSON=function(e){var n=new RTree;return n.setTree(JSON.parse(e)),n},module.exports=RTree,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"object"==typeof e&&"[object Array]"==={}.toString.call(e)});

},{"11":11}],13:[function(require,module,exports){
!function(){"use strict";var r=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,t=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function i(r){var e;e="function"==typeof r?r:r?function(){var r=0,e=0,t=0,a=1,o=(i=4022871197,function(r){r=r.toString();for(var e=0;e<r.length;e++){var t=.02519603282416938*(i+=r.charCodeAt(e));t-=i=t>>>0,i=(t*=i)>>>0,i+=4294967296*(t-=i)}return 2.3283064365386963e-10*(i>>>0)});var i;r=o(" "),e=o(" "),t=o(" ");for(var n=0;n<arguments.length;n++)(r-=o(arguments[n]))<0&&(r+=1),(e-=o(arguments[n]))<0&&(e+=1),(t-=o(arguments[n]))<0&&(t+=1);return o=null,function(){var o=2091639*r+2.3283064365386963e-10*a;return r=e,e=t,t=o-(a=0|o)}}(r):Math.random,this.p=n(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function n(r){var e,t=new Uint8Array(256);for(e=0;e<256;e++)t[e]=e;for(e=0;e<255;e++){var a=e+~~(r()*(256-e)),o=t[e];t[e]=t[a],t[a]=o}return t}i.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,a){var o,i,n=this.permMod12,f=this.perm,s=this.grad3,v=0,h=0,l=0,u=(t+a)*r,d=Math.floor(t+u),p=Math.floor(a+u),M=(d+p)*e,m=t-(d-M),c=a-(p-M);m>c?(o=1,i=0):(o=0,i=1);var y=m-o+e,w=c-i+e,g=m-1+2*e,A=c-1+2*e,x=255&d,q=255&p,D=.5-m*m-c*c;if(D>=0){var S=3*n[x+f[q]];v=(D*=D)*D*(s[S]*m+s[S+1]*c)}var U=.5-y*y-w*w;if(U>=0){var b=3*n[x+o+f[q+i]];h=(U*=U)*U*(s[b]*y+s[b+1]*w)}var F=.5-g*g-A*A;if(F>=0){var N=3*n[x+1+f[q+1]];l=(F*=F)*F*(s[N]*g+s[N+1]*A)}return 70*(v+h+l)},noise3D:function(r,e,a){var o,i,n,f,s,v,h,l,u,d,p=this.permMod12,M=this.perm,m=this.grad3,c=(r+e+a)*(1/3),y=Math.floor(r+c),w=Math.floor(e+c),g=Math.floor(a+c),A=(y+w+g)*t,x=r-(y-A),q=e-(w-A),D=a-(g-A);x>=q?q>=D?(s=1,v=0,h=0,l=1,u=1,d=0):x>=D?(s=1,v=0,h=0,l=1,u=0,d=1):(s=0,v=0,h=1,l=1,u=0,d=1):q<D?(s=0,v=0,h=1,l=0,u=1,d=1):x<D?(s=0,v=1,h=0,l=0,u=1,d=1):(s=0,v=1,h=0,l=1,u=1,d=0);var S=x-s+t,U=q-v+t,b=D-h+t,F=x-l+2*t,N=q-u+2*t,C=D-d+2*t,P=x-1+.5,T=q-1+.5,_=D-1+.5,j=255&y,k=255&w,z=255&g,B=.6-x*x-q*q-D*D;if(B<0)o=0;else{var E=3*p[j+M[k+M[z]]];o=(B*=B)*B*(m[E]*x+m[E+1]*q+m[E+2]*D)}var G=.6-S*S-U*U-b*b;if(G<0)i=0;else{var H=3*p[j+s+M[k+v+M[z+h]]];i=(G*=G)*G*(m[H]*S+m[H+1]*U+m[H+2]*b)}var I=.6-F*F-N*N-C*C;if(I<0)n=0;else{var J=3*p[j+l+M[k+u+M[z+d]]];n=(I*=I)*I*(m[J]*F+m[J+1]*N+m[J+2]*C)}var K=.6-P*P-T*T-_*_;if(K<0)f=0;else{var L=3*p[j+1+M[k+1+M[z+1]]];f=(K*=K)*K*(m[L]*P+m[L+1]*T+m[L+2]*_)}return 32*(o+i+n+f)},noise4D:function(r,e,t,i){var n,f,s,v,h,l,u,d,p,M,m,c,y,w,g,A,x,q=this.perm,D=this.grad4,S=(r+e+t+i)*a,U=Math.floor(r+S),b=Math.floor(e+S),F=Math.floor(t+S),N=Math.floor(i+S),C=(U+b+F+N)*o,P=r-(U-C),T=e-(b-C),_=t-(F-C),j=i-(N-C),k=0,z=0,B=0,E=0;P>T?k++:z++,P>_?k++:B++,P>j?k++:E++,T>_?z++:B++,T>j?z++:E++,_>j?B++:E++;var G=P-(l=k>=3?1:0)+o,H=T-(u=z>=3?1:0)+o,I=_-(d=B>=3?1:0)+o,J=j-(p=E>=3?1:0)+o,K=P-(M=k>=2?1:0)+2*o,L=T-(m=z>=2?1:0)+2*o,O=_-(c=B>=2?1:0)+2*o,Q=j-(y=E>=2?1:0)+2*o,R=P-(w=k>=1?1:0)+3*o,V=T-(g=z>=1?1:0)+3*o,W=_-(A=B>=1?1:0)+3*o,X=j-(x=E>=1?1:0)+3*o,Y=P-1+4*o,Z=T-1+4*o,$=_-1+4*o,rr=j-1+4*o,er=255&U,tr=255&b,ar=255&F,or=255&N,ir=.6-P*P-T*T-_*_-j*j;if(ir<0)n=0;else{var nr=q[er+q[tr+q[ar+q[or]]]]%32*4;n=(ir*=ir)*ir*(D[nr]*P+D[nr+1]*T+D[nr+2]*_+D[nr+3]*j)}var fr=.6-G*G-H*H-I*I-J*J;if(fr<0)f=0;else{var sr=q[er+l+q[tr+u+q[ar+d+q[or+p]]]]%32*4;f=(fr*=fr)*fr*(D[sr]*G+D[sr+1]*H+D[sr+2]*I+D[sr+3]*J)}var vr=.6-K*K-L*L-O*O-Q*Q;if(vr<0)s=0;else{var hr=q[er+M+q[tr+m+q[ar+c+q[or+y]]]]%32*4;s=(vr*=vr)*vr*(D[hr]*K+D[hr+1]*L+D[hr+2]*O+D[hr+3]*Q)}var lr=.6-R*R-V*V-W*W-X*X;if(lr<0)v=0;else{var ur=q[er+w+q[tr+g+q[ar+A+q[or+x]]]]%32*4;v=(lr*=lr)*lr*(D[ur]*R+D[ur+1]*V+D[ur+2]*W+D[ur+3]*X)}var dr=.6-Y*Y-Z*Z-$*$-rr*rr;if(dr<0)h=0;else{var pr=q[er+1+q[tr+1+q[ar+1+q[or+1]]]]%32*4;h=(dr*=dr)*dr*(D[pr]*Y+D[pr+1]*Z+D[pr+2]*$+D[pr+3]*rr)}return 27*(n+f+s+v+h)}},i._buildPermutationTable=n,"undefined"!=typeof define&&define.amd&&define(function(){return i}),"undefined"!=typeof exports?exports.SimplexNoise=i:"undefined"!=typeof window&&(window.SimplexNoise=i),"undefined"!=typeof module&&(module.exports=i)}();

},{}]},{},[1])
//# sourceMappingURL=bundle.js.map
