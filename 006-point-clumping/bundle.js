(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var Simplex=require(31),setupRandom=require(5),initializeShortcuts=require(3),_require=require(2),setupCanvas=_require.setupCanvas,loop=_require.loop,generateSeed=_require.generateSeed,createVerletSystem=require(41),createPoint=require(39),createConstraint=require(37),lerp=require(22),createRtree=require(28),triangulate=require(9),ease=require(10),TAU=2*Math.PI,seed=generateSeed(),random=setupRandom(seed),simplex=new Simplex(random),simplex3=simplex.noise3D.bind(simplex),ctx=setupCanvas();document.body.style.cursor="none",initializeShortcuts(seed);var config={ctx:ctx,seed:seed,random:random,simplex3:simplex3,textFadeInSpeed:.02,textFadeOutSpeed:.02,delaunayChance:.1,gridCellSize:75,mouseLinesCount:17,mouseLinesLength:30,mouseLinesSpeed:.3,mouseLinesDiamondWidth:1,maxConstraintsPerPoint:5,minimumRemainingPoints:20,breakingForce:.05,constraintConfig:{stiffness:.01,restingDistance:15}},current={now:Date.now()/1e3,dt:0,textFadeIn:0,firstFewDts:[],medianDt:0,lastTickUnravelCount:0,tick:0,rtree:createRtree(),points:[],constraints:[],grid:createGrid(config),pointToConstraints:new Map,verletSystem:createVerletSystem({min:[0,0],max:[innerWidth,innerHeight]}),mouseX:100,mouseY:100,isMouseDown:!1};function updateDelaunay(t,e){var r=t.random,n=t.delaunayChance,o=e.pointToConstraints;if(!(r()>n||e.constraints.length<10)){var i=new Set,a=new Set,l=e.constraints[r(0,e.constraints.length-1,!0)],u=[l];for(a.add(l);u.length>0;){var s=u.pop(),c=!0,d=!1,f=void 0;try{for(var v,m=s.points[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){var y=v.value;i.add(y);var h=o.get(y);if(h){var p=!0,g=!1,w=void 0;try{for(var x,b=h[Symbol.iterator]();!(p=(x=b.next()).done);p=!0){var S=x.value;a.has(S)||(a.add(S),u.push(S))}}catch(t){g=!0,w=t}finally{try{p||null==b.return||b.return()}finally{if(g)throw w}}}}}catch(t){d=!0,f=t}finally{try{c||null==m.return||m.return()}finally{if(d)throw f}}}var C=!0,T=!1,M=void 0;try{for(var N,I=i[Symbol.iterator]();!(C=(N=I.next()).done);C=!0){var A=N.value;if(!e.points.includes(A))throw new Error("Woops")}}catch(t){T=!0,M=t}finally{try{C||null==I.return||I.return()}finally{if(T)throw M}}if(!(a.size<12)){var L=!0,_=!1,F=void 0;try{for(var P,D=i[Symbol.iterator]();!(L=(P=D.next()).done);L=!0){var k=P.value;o.delete(k)}}catch(t){_=!0,F=t}finally{try{L||null==D.return||D.return()}finally{if(_)throw F}}e.constraints=e.constraints.filter(function(t){return!a.has(t)});var q=_toConsumableArray(i),E=triangulate(q.map(function(t){return t.position})),R=!0,U=!1,W=void 0;try{for(var O,H=E[Symbol.iterator]();!(R=(O=H.next()).done);R=!0){var X=O.value,Y=q[X[0]],j=q[X[1]],z=q[X[2]];addConstraintToSystem(e,t,Y,j),addConstraintToSystem(e,t,j,z),addConstraintToSystem(e,t,z,Y)}}catch(t){U=!0,W=t}finally{try{R||null==H.return||H.return()}finally{if(U)throw W}}}}}function updateUnravel(t,e){var r=t.random,n=t.minimumRemainingPoints,o=e.constraints,i=e.points,a=e.pointToConstraints,l=e.firstFewDts,u=e.tick,s=e.dt;if(u<11){if(1===u)return;l.push(s)}else if(11===u&&(l.sort(),e.medianDt=l[Math.floor(l.length/2)]),o.length<10)e.lastTickUnravelCount=0;else{s>2*e.medianDt?e.lastTickUnravelCount+=2:(e.lastTickUnravelCount=Math.floor((e.lastTickUnravelCount-1)/2),e.lastTickUnravelCount=Math.max(0,e.lastTickUnravelCount));for(var c=Math.min(i.length-n,e.lastTickUnravelCount),d=0;d<c;d++){var f=r(0,i.length-1,!0),v=i[f];fastRemove(i,f),e.grid.removeItem(v);var m=a.get(v);if(a.delete(v),m){var y=!0,h=!1,p=void 0;try{for(var g,w=m[Symbol.iterator]();!(y=(g=w.next()).done);y=!0){var x=g.value;impartForceOnConnectedConstraints(t,e,x);var b=o.indexOf(x);if(-1!==b){fastRemove(o,b);var S=!0,C=!1,T=void 0;try{for(var M,N=x.points[Symbol.iterator]();!(S=(M=N.next()).done);S=!0){var I=M.value,A=a.get(I);A&&fastRemove(A,A.indexOf(x))}}catch(t){C=!0,T=t}finally{try{S||null==N.return||N.return()}finally{if(C)throw T}}}}}catch(t){h=!0,p=t}finally{try{y||null==w.return||w.return()}finally{if(h)throw p}}}}}}function impartForceOnConnectedConstraints(t,e,r){var n=t.random,o=t.breakingForce,i=e.pointToConstraints,a=!0,l=!1,u=void 0;try{for(var s,c=r.points[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value,f=i.get(d);if(f){var v=!0,m=!1,y=void 0;try{for(var h,p=f[Symbol.iterator]();!(v=(h=p.next()).done);v=!0){var g=h.value,w=!0,x=!1,b=void 0;try{for(var S,C=g.points[Symbol.iterator]();!(w=(S=C.next()).done);w=!0){var T=S.value,M=n(TAU),N=n(o);T.addForce([Math.cos(M)*N,Math.sin(M)*N])}}catch(t){x=!0,b=t}finally{try{w||null==C.return||C.return()}finally{if(x)throw b}}}}catch(t){m=!0,y=t}finally{try{v||null==p.return||p.return()}finally{if(m)throw y}}}}}catch(t){l=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}}function fastRemove(t,e){-1!==e&&0!==t.length&&(e===t.length-1?t.pop():t[e]=t.pop())}function addConstraintToSystem(t,e,r,n){var o=e.constraintConfig,i=t.pointToConstraints,a=createConstraint([r,n],o);insertIntoList(i,r,a),insertIntoList(i,n,a),t.constraints.push(a)}function updateRandomConnection(t,e){var r=t.random,n=t.maxConstraintsPerPoint,o=e.points,i=e.constraints;if(!(o.length<5))for(var a=Math.max(5,o.length/10),l=0;l<a;l++){var u=o[r(0,o.length,!0)];if(u.connectionCount>=n)return;var s=e.grid.getNearestNeighbor(u);if(s&&!(s.connectionCount>=n)){var c=!1,d=!0,f=!1,v=void 0;try{for(var m,y=i[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var h=_slicedToArray(m.value.points,2),p=h[0],g=h[1];if(!(p!==u&&p!==s||g!==u&&g!==s)){c=!0;break}}}catch(t){f=!0,v=t}finally{try{d||null==y.return||y.return()}finally{if(f)throw v}}c||(u.connectionCount=(u.connectionCount||0)+1,s.connectionCount=(s.connectionCount||0)+1,addConstraintToSystem(e,t,u,s))}}}function insertIntoList(t,e,r){var n=t.get(e);n||(n=[],t.set(e,n)),n.push(r)}function setupMouseMove(t,e){window.addEventListener("touchmove",function(t){var r=_slicedToArray(t.touches[0],1)[0],n=r.pageX,o=r.pageY;e.mouseX=n,e.mouseY=o}),window.addEventListener("touchend",function(){e.mouseX=null,e.mouseY=null}),window.addEventListener("mousemove",function(t){e.mouseX=t.pageX,e.mouseY=t.pageY}),window.addEventListener("mouseout",function(){e.mouseX=null,e.mouseY=null})}function createGrid(t){for(var e=t.gridCellSize,r=Math.max(1,Math.floor(innerWidth/e)),n=Math.max(1,Math.floor(innerHeight/e)),o=new Map,i=[],a=0;a<r;a++){i.push([]);for(var l=0;l<n;l++)i[a][l]=new Set}function u(t,e,a){if(Number.isNaN(e)||Number.isNaN(a))throw new Error("gride.updateItem, pixels were NaN");var l=clamp(0,r-1,Math.floor(e/r)),u=clamp(0,n-1,Math.floor(a/n)),s=o.get(t);if(s?(i[s.x][s.y].delete(t),s.x=l,s.y=u):(s={x:l,y:u},o.set(t,s)),Number.isNaN(s.x)||Number.isNaN(s.y))throw new Error("A NaN coordinate was found.");i[s.x][s.y].add(t)}function s(t){var e=o.get(t);if(!e)throw new Error("Could not find the item's coordinate. Was it updated?");return i[e.x][e.y]}return{update:function(t){var e=!0,r=!1,n=void 0;try{for(var o,i=t.points[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;u(a,a.position[0],a.position[1])}}catch(t){r=!0,n=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}},removeItem:function(t){var e=o.get(t);if(!e)throw new Error("Could not find that item in the grid");i[e.x][e.y].delete(t)},getNeighbors:s,getNearestNeighbor:function(t){var e,r,n,o,i,a,l=!0,u=!1,c=void 0;try{for(var d,f=s(t)[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var v=d.value;if(v!==t){var m=(o=v,i=void 0,a=void 0,i=(n=t).position[0]-o.position[0],a=n.position[1]-o.position[1],i*i+a*a);e?m<r&&(e=v,r=m):(e=v,r=m)}}}catch(t){u=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return e}}}function drawClearScreen(t){var e=t.ctx;e.fillStyle="#000",e.fillRect(0,0,innerWidth,innerHeight)}function updateVerlet(t,e){var r=e.verletSystem,n=e.points,o=e.constraints,i=e.dt;r.max=[innerWidth,innerHeight],r.integrate(n,i);var a=!0,l=!1,u=void 0;try{for(var s,c=o[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){s.value.solve()}}catch(t){l=!0,u=t}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}}function drawMouse(t,e){var r=t.ctx,n=t.mouseLinesCount,o=t.mouseLinesLength,i=t.mouseLinesSpeed,a=t.mouseLinesDiamondWidth,l=e.mouseX,u=e.mouseY,s=e.time;if(r.fillStyle="#fff",r.beginPath(),null!==l)for(var c=s*i,d=0;d<n;d++){var f=TAU*d/n,v=o*Math.abs(Math.sin(s+3*f)),m=l+Math.cos(c+f)*v,y=u+Math.sin(c+f)*v,h=getPerpendicularUnitVector(l,u,m,y),p=lerp(l,m,.5),g=lerp(u,y,.5),w=Math.sin(3*f+s)*a;r.moveTo(l,u),r.lineTo(p+h.x*w,g+h.y*w),r.lineTo(m,y),r.lineTo(p-h.x*w,g-h.y*w),e.time}r.fill()}function drawConstraints(t,e){var r=e.constraints,n=t.ctx;n.lineWidth=1,n.strokeStyle="#fff",n.beginPath();var o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=_slicedToArray(l.value.points,2),c=s[0],d=s[1];n.moveTo(c.position[0],c.position[1]),n.lineTo(d.position[0],d.position[1])}}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}n.stroke()}function drawPoints(t,e){var r=t.ctx,n=e.points,o=e.pointToConstraints;r.fillStyle="#fff";var i=!0,a=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;if(!o.has(c)){var d=_slicedToArray(c.position,2),f=d[0],v=d[1];r.fillRect(f-1.5,v-1.5,3,3)}}}catch(t){a=!0,l=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}}function getPerpendicularUnitVector(t,e,r,n){var o=t-r,i=e-n,a=Math.sqrt(o*o+i*i);return{x:i/a,y:-o/a}}function updatePointGeneraton(t,e){var r=t.random,n=e.mouseX,o=e.mouseY,i=e.points;if(e.isMouseDown&&null!==n&&null!==o)for(var a=0;a<5;a++){var l=createPoint({position:[n,o]}),u=r(TAU),s=r(2,3);if(l.addForce([Math.cos(u)*s,Math.sin(u)*s]),Number.isNaN(l.position[0])||Number.isNaN(l.position[1]))throw new Error("updatePointGeneration had a NaN");i.push(l)}}function clamp(t,e,r){return Math.max(t,Math.min(e,r))}function drawIntroText(t,e){var r=t.ctx;if(0===e.points.length?(e.textFadeIn+=t.textFadeInSpeed,e.textFadeIn=Math.min(1,e.textFadeIn)):(e.textFadeIn-=t.textFadeOutSpeed,e.textFadeIn=Math.max(0,e.textFadeIn)),e.textFadeIn>0){var n=Math.floor(15*ease(e.textFadeIn)).toString(16);r.textAlign="center",r.font="25px sans-serif",r.fillStyle="#fff"+n,r.fillText("Push on the screen",innerWidth/2,innerHeight/2)}}window.current=current,setupMouseMove(config,current),window.addEventListener("resize",function(){current.grid=createGrid(config)}),window.addEventListener("mousedown",function(){return current.isMouseDown=!0}),window.addEventListener("mouseup",function(){return current.isMouseDown=!1}),window.addEventListener("mouseout",function(){return current.isMouseDown=!1}),loop(function(t){try{current.dt=Math.min(t-current.time,100),current.time=t,current.tick++,updatePointGeneraton(config,current),current.grid.update(current),updateRandomConnection(config,current),updateDelaunay(config,current),updateUnravel(config,current),updateVerlet(config,current),drawClearScreen(config),drawIntroText(config,current),drawMouse(config,current),drawConstraints(config,current),drawPoints(config,current)}catch(t){throw document.body.style.cursor="default",t}});

},{"10":10,"2":2,"22":22,"28":28,"3":3,"31":31,"37":37,"39":39,"41":41,"5":5,"9":9}],2:[function(require,module,exports){
"use strict";var lerp=require(22);function setupCanvas(){var e=document.createElement("canvas"),n=e.getContext("2d",{alpha:!1});function t(){e.width=window.innerWidth*devicePixelRatio,e.height=window.innerHeight*devicePixelRatio,n.scale(devicePixelRatio,devicePixelRatio)}return document.body.appendChild(e),t(),window.addEventListener("resize",t,!1),n}function loop(e){var n=Date.now();requestAnimationFrame(function t(){e((Date.now()-n)/1e3),requestAnimationFrame(t)})}function generateSeed(){var e=window.location.hash.substr(1)||String(Math.random()).split(".")[1];return console.log("current seed",e),window.onhashchange=function(){location.reload()},e}var TAU=Math.PI;function lerpTheta(e,n,t){return(n=(n%TAU+TAU)%TAU)-(e=(e%TAU+TAU)%TAU)>Math.PI&&(e+=TAU),lerp(e,n,t)}module.exports={setupCanvas:setupCanvas,loop:loop,generateSeed:generateSeed,lerpTheta:lerpTheta};

},{"22":22}],3:[function(require,module,exports){
"use strict";function _click(e){var n=document.querySelector(e);n&&n.click()}module.exports=function(e,n){console.log(["Available shortcuts:","f: enter fullscreen","h: hide the ui","r: reload the ui","s: create a screenshot link","u: save the current seed to the URL","left: previous session","right: next session"].join("\n")),window.addEventListener("keydown",function(t){switch(t.key){case"h":document.body.classList.toggle("hide-ui");break;case"r":window.location.reload();break;case"s":var o=document.querySelector("canvas");if(!o){console.log("Could not find a canvas element to screenshot");break}var c=document.querySelector(".download-link");c||((c=document.createElement("a")).className="download-link",document.body.appendChild(c),c.innerHTML="Download Screenshot",c.target="_blank",c.addEventListener("click",function(){c.style.display="none"})),c.href=o.toDataURL(),c.style.display="inline-block";break;case"u":history.pushState(null,document.title,window.location.pathname+"#"+e);break;case"f":if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var l=document.querySelector("canvas");l.requestFullscreen&&l.requestFullscreen()}n&&n();break;case"ArrowLeft":_click("#prev");break;case"ArrowRight":_click("#next")}},!1)};

},{}],4:[function(require,module,exports){
function _mashFn(){var r=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var e=.02519603282416938*(r+=n.charCodeAt(t));e-=r=e>>>0,r=(e*=r)>>>0,r+=4294967296*(e-=r)}return 2.3283064365386963e-10*(r>>>0)}}module.exports=function(){var r=Array.prototype.slice.call(arguments),n=0,t=0,e=0,a=1;0===r.length&&(r=[+new Date]);var o=_mashFn();n=t=e=o(" ");for(var u=0;u<r.length;u++)(n-=o(r[u]))<0&&(n+=1),(t-=o(r[u]))<0&&(t+=1),(e-=o(r[u]))<0&&(e+=1);return function(){var r=2091639*n+2.3283064365386963e-10*a;return n=t,t=e,e=r-(a=0|r)}};

},{}],5:[function(require,module,exports){
var Alea=require(4);module.exports=function(){var r=Alea.apply(this,arguments);return function(e,a,n){a=void 0===a?1:a;var t=(e=void 0===e?0:e)+r()*(a-e);return n?parseInt(t,10):t}};

},{"4":4}],6:[function(require,module,exports){
module.exports=function(e,n){return"number"==typeof e?e:"number"==typeof n?n:0};

},{}],7:[function(require,module,exports){
"use strict";var INT_BITS=32;function countTrailingZeros(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}exports.INT_BITS=INT_BITS,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<INT_BITS-1,exports.sign=function(r){return(r>0)-(r<0)},exports.abs=function(r){var n=r>>INT_BITS-1;return(r^n)-n},exports.min=function(r,n){return n^(r^n)&-(r<n)},exports.max=function(r,n){return r^(r^n)&-(r<n)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var n,t;return n=(r>65535)<<4,n|=t=((r>>>=n)>255)<<3,n|=t=((r>>>=t)>15)<<2,(n|=t=((r>>>=t)>3)<<1)|(r>>>=t)>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=countTrailingZeros,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var REVERSE_TABLE=new Array(256);!function(r){for(var n=0;n<256;++n){var t=n,e=n,o=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--o;r[n]=e<<o&255}}(REVERSE_TABLE),exports.reverse=function(r){return REVERSE_TABLE[255&r]<<24|REVERSE_TABLE[r>>>8&255]<<16|REVERSE_TABLE[r>>>16&255]<<8|REVERSE_TABLE[r>>>24&255]},exports.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},exports.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},exports.interleave3=function(r,n,t){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<2},exports.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},exports.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>countTrailingZeros(r)+1};

},{}],8:[function(require,module,exports){
function clamp(c,e,l){return e<l?c<e?e:c>l?l:c:c<l?l:c>e?e:c}module.exports=clamp;

},{}],9:[function(require,module,exports){
"use strict";var ch=require(21),uniq=require(36);function LiftedPoint(r,n){this.point=r,this.index=n}function compareLifted(r,n){for(var t=r.point,e=n.point,i=t.length,a=0;a<i;++a){var u=e[a]-t[a];if(u)return u}return 0}function triangulate1D(r,n,t){if(1===r)return t?[[-1,0]]:[];var e=n.map(function(r,n){return[r[0],n]});e.sort(function(r,n){return r[0]-n[0]});for(var i=new Array(r-1),a=1;a<r;++a){var u=e[a-1],f=e[a];i[a-1]=[u[1],f[1]]}return t&&i.push([-1,i[0][1]],[i[r-1][1],-1]),i}function triangulate(r,n){var t=r.length;if(0===t)return[];var e=r[0].length;if(e<1)return[];if(1===e)return triangulate1D(t,r,n);for(var i=new Array(t),a=1,u=0;u<t;++u){for(var f=r[u],o=new Array(e+1),v=0,c=0;c<e;++c){var l=f[c];o[c]=l,v+=l*l}o[e]=v,i[u]=new LiftedPoint(o,u),a=Math.max(v,a)}uniq(i,compareLifted),t=i.length;var h=new Array(t+e+1),g=new Array(t+e+1),p=(e+1)*(e+1)*a,s=new Array(e+1);for(u=0;u<=e;++u)s[u]=0;s[e]=p,h[0]=s.slice(),g[0]=-1;for(u=0;u<=e;++u){(o=s.slice())[u]=1,h[u+1]=o,g[u+1]=-1}for(u=0;u<t;++u){var d=i[u];h[u+e+1]=d.point,g[u+e+1]=d.index}var w=ch(h,!1);if(w=n?w.filter(function(r){for(var n=0,t=0;t<=e;++t){var i=g[r[t]];if(i<0&&++n>=2)return!1;r[t]=i}return!0}):w.filter(function(r){for(var n=0;n<=e;++n){var t=g[r[n]];if(t<0)return!1;r[n]=t}return!0}),1&e)for(u=0;u<w.length;++u){o=(d=w[u])[0];d[0]=d[1],d[1]=o}return w}module.exports=triangulate;

},{"21":21,"36":36}],10:[function(require,module,exports){
function cubicInOut(u){return u<.5?4*u*u*u:.5*Math.pow(2*u-2,3)+1}module.exports=cubicInOut;

},{}],11:[function(require,module,exports){
function add(d,e,n){return d[0]=e[0]+n[0],d[1]=e[1]+n[1],d}module.exports=add;

},{}],12:[function(require,module,exports){
function copy(o,c){return o[0]=c[0],o[1]=c[1],o}module.exports=copy;

},{}],13:[function(require,module,exports){
function create(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}module.exports=create;

},{}],14:[function(require,module,exports){
function distance(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}module.exports=distance;

},{}],15:[function(require,module,exports){
function dot(o,t){return o[0]*t[0]+o[1]*t[1]}module.exports=dot;

},{}],16:[function(require,module,exports){
function fromValues(r,e){var o=new Float32Array(2);return o[0]=r,o[1]=e,o}module.exports=fromValues;

},{}],17:[function(require,module,exports){
function multiply(l,t,u){return l[0]=t[0]*u[0],l[1]=t[1]*u[1],l}module.exports=multiply;

},{}],18:[function(require,module,exports){
function scale(e,c,l){return e[0]=c[0]*l,e[1]=c[1]*l,e}module.exports=scale;

},{}],19:[function(require,module,exports){
function squaredLength(e){var r=e[0],n=e[1];return r*r+n*n}module.exports=squaredLength;

},{}],20:[function(require,module,exports){
function subtract(t,r,u){return t[0]=r[0]-u[0],t[1]=r[1]-u[1],t}module.exports=subtract;

},{}],21:[function(require,module,exports){
"use strict";module.exports=incrementalConvexHull;var orient=require(23),compareCell=require(32).compareCells;function compareInt(e,t){return e-t}function Simplex(e,t,i){this.vertices=e,this.adjacent=t,this.boundary=i,this.lastVisited=-1}function GlueFacet(e,t,i){this.vertices=e,this.cell=t,this.index=i}function compareGlue(e,t){return compareCell(e.vertices,t.vertices)}function bakeOrient(e){for(var t=["function orient(){var tuple=this.tuple;return test("],i=0;i<=e;++i)i>0&&t.push(","),t.push("tuple[",i,"]");t.push(")}return orient");var r=new Function("test",t.join("")),n=orient[e+1];return n||(n=orient),r(n)}Simplex.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var BAKED=[];function Triangulation(e,t,i){this.dimension=e,this.vertices=t,this.simplices=i,this.interior=i.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;r<=e;++r)this.tuple[r]=this.vertices[r];var n=BAKED[e];n||(n=BAKED[e]=bakeOrient(e)),this.orient=n}var proto=Triangulation.prototype;function incrementalConvexHull(e,t){var i=e.length;if(0===i)throw new Error("Must have at least d+1 points");var r=e[0].length;if(i<=r)throw new Error("Must input at least d+1 points");var n=e.slice(0,r+1),s=orient.apply(void 0,n);if(0===s)throw new Error("Input not in general position");for(var a=new Array(r+1),o=0;o<=r;++o)a[o]=o;s<0&&(a[0]=1,a[1]=0);var l=new Simplex(a,new Array(r+1),!1),v=l.adjacent,c=new Array(r+2);for(o=0;o<=r;++o){for(var h=a.slice(),u=0;u<=r;++u)u===o&&(h[u]=-1);var d=h[0];h[0]=h[1],h[1]=d;var f=new Simplex(h,new Array(r+1),!0);v[o]=f,c[o]=f}c[r+1]=l;for(o=0;o<=r;++o){h=v[o].vertices;var p=v[o].adjacent;for(u=0;u<=r;++u){var m=h[u];if(m<0)p[u]=l;else for(var y=0;y<=r;++y)v[y].vertices.indexOf(m)<0&&(p[u]=v[y])}}var w=new Triangulation(r,n,c),x=!!t;for(o=r+1;o<i;++o)w.insert(e[o],x);return w.boundary()}proto.handleBoundaryDegeneracy=function(e,t){var i=this.dimension,r=this.vertices.length-1,n=this.tuple,s=this.vertices,a=[e];for(e.lastVisited=-r;a.length>0;){(e=a.pop()).vertices;for(var o=e.adjacent,l=0;l<=i;++l){var v=o[l];if(v.boundary&&!(v.lastVisited<=-r)){for(var c=v.vertices,h=0;h<=i;++h){var u=c[h];n[h]=u<0?t:s[u]}var d=this.orient();if(d>0)return v;v.lastVisited=-r,0===d&&a.push(v)}}}return null},proto.walk=function(e,t){var i=this.vertices.length-1,r=this.dimension,n=this.vertices,s=this.tuple,a=t?this.interior.length*Math.random()|0:this.interior.length-1,o=this.interior[a];e:for(;!o.boundary;){for(var l=o.vertices,v=o.adjacent,c=0;c<=r;++c)s[c]=n[l[c]];o.lastVisited=i;for(c=0;c<=r;++c){var h=v[c];if(!(h.lastVisited>=i)){var u=s[c];s[c]=e;var d=this.orient();if(s[c]=u,d<0){o=h;continue e}h.boundary?h.lastVisited=-i:h.lastVisited=i}}return}return o},proto.addPeaks=function(e,t){var i=this.vertices.length-1,r=this.dimension,n=this.vertices,s=this.tuple,a=this.interior,o=this.simplices,l=[t];t.lastVisited=i,t.vertices[t.vertices.indexOf(-1)]=i,t.boundary=!1,a.push(t);for(var v=[];l.length>0;){var c=(t=l.pop()).vertices,h=t.adjacent,u=c.indexOf(i);if(!(u<0))for(var d=0;d<=r;++d)if(d!==u){var f=h[d];if(f.boundary&&!(f.lastVisited>=i)){var p=f.vertices;if(f.lastVisited!==-i){for(var m=0,y=0;y<=r;++y)p[y]<0?(m=y,s[y]=e):s[y]=n[p[y]];if(this.orient()>0){p[m]=i,f.boundary=!1,a.push(f),l.push(f),f.lastVisited=i;continue}f.lastVisited=-i}var w=f.adjacent,x=c.slice(),g=h.slice(),b=new Simplex(x,g,!0);o.push(b);var j=w.indexOf(t);if(!(j<0)){w[j]=b,g[u]=f,x[d]=-1,g[d]=t,h[d]=b,b.flip();for(y=0;y<=r;++y){var V=x[y];if(!(V<0||V===i)){for(var A=new Array(r-1),k=0,E=0;E<=r;++E){var O=x[E];O<0||E===y||(A[k++]=O)}v.push(new GlueFacet(A,b,y))}}}}}}v.sort(compareGlue);for(d=0;d+1<v.length;d+=2){var B=v[d],C=v[d+1],D=B.index,S=C.index;D<0||S<0||(B.cell.adjacent[B.index]=C.cell,C.cell.adjacent[C.index]=B.cell)}},proto.insert=function(e,t){var i=this.vertices;i.push(e);var r=this.walk(e,t);if(r){for(var n=this.dimension,s=this.tuple,a=0;a<=n;++a){var o=r.vertices[a];s[a]=o<0?e:i[o]}var l=this.orient(s);l<0||(0!==l||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},proto.boundary=function(){for(var e=this.dimension,t=[],i=this.simplices,r=i.length,n=0;n<r;++n){var s=i[n];if(s.boundary){for(var a=new Array(e),o=s.vertices,l=0,v=0,c=0;c<=e;++c)o[c]>=0?a[l++]=o[c]:v=1&c;if(v===(1&e)){var h=a[0];a[0]=a[1],a[1]=h}t.push(a)}}return t};

},{"23":23,"32":32}],22:[function(require,module,exports){
function lerp(e,r,l){return e*(1-l)+r*l}module.exports=lerp;

},{}],23:[function(require,module,exports){
"use strict";var twoProduct=require(33),robustSum=require(26),robustScale=require(24),robustSubtract=require(25),NUM_EXPAND=5,EPSILON=1.1102230246251565e-16,ERRBOUND3=(3+16*EPSILON)*EPSILON,ERRBOUND4=(7+56*EPSILON)*EPSILON;function cofactor(r,t){for(var n=new Array(r.length-1),e=1;e<r.length;++e)for(var o=n[e-1]=new Array(r.length-1),a=0,u=0;a<r.length;++a)a!==t&&(o[u++]=r[e][a]);return n}function matrix(r){for(var t=new Array(r),n=0;n<r;++n){t[n]=new Array(r);for(var e=0;e<r;++e)t[n][e]=["m",e,"[",r-n-1,"]"].join("")}return t}function sign(r){return 1&r?"-":""}function generateSum(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var t=r.length>>1;return["sum(",generateSum(r.slice(0,t)),",",generateSum(r.slice(t)),")"].join("")}function determinant(r){if(2===r.length)return[["sum(prod(",r[0][0],",",r[1][1],"),prod(-",r[0][1],",",r[1][0],"))"].join("")];for(var t=[],n=0;n<r.length;++n)t.push(["scale(",generateSum(determinant(cofactor(r,n))),",",sign(n),r[0][n],")"].join(""));return t}function orientation(r){for(var t=[],n=[],e=matrix(r),o=[],a=0;a<r;++a)0==(1&a)?t.push.apply(t,determinant(cofactor(e,a))):n.push.apply(n,determinant(cofactor(e,a))),o.push("m"+a);var u=generateSum(t),i=generateSum(n),s="orientation"+r+"Exact",c=["function ",s,"(",o.join(),"){var p=",u,",n=",i,",d=sub(p,n);return d[d.length-1];};return ",s].join("");return new Function("sum","prod","scale","sub",c)(robustSum,twoProduct,robustScale,robustSubtract)}var orientation3Exact=orientation(3),orientation4Exact=orientation(4),CACHED=[function(){return 0},function(){return 0},function(r,t){return t[0]-r[0]},function(r,t,n){var e,o=(r[1]-n[1])*(t[0]-n[0]),a=(r[0]-n[0])*(t[1]-n[1]),u=o-a;if(o>0){if(a<=0)return u;e=o+a}else{if(!(o<0))return u;if(a>=0)return u;e=-(o+a)}var i=ERRBOUND3*e;return u>=i||u<=-i?u:orientation3Exact(r,t,n)},function(r,t,n,e){var o=r[0]-e[0],a=t[0]-e[0],u=n[0]-e[0],i=r[1]-e[1],s=t[1]-e[1],c=n[1]-e[1],h=r[2]-e[2],l=t[2]-e[2],f=n[2]-e[2],g=a*c,p=u*s,m=u*i,E=o*c,b=o*s,v=a*i,N=h*(g-p)+l*(m-E)+f*(b-v),d=(Math.abs(g)+Math.abs(p))*Math.abs(h)+(Math.abs(m)+Math.abs(E))*Math.abs(l)+(Math.abs(b)+Math.abs(v))*Math.abs(f),A=ERRBOUND4*d;return N>A||-N>A?N:orientation4Exact(r,t,n,e)}];function slowOrient(r){var t=CACHED[r.length];return t||(t=CACHED[r.length]=orientation(r.length)),t.apply(void 0,r)}function generateOrientationProc(){for(;CACHED.length<=NUM_EXPAND;)CACHED.push(orientation(CACHED.length));for(var r=[],t=["slow"],n=0;n<=NUM_EXPAND;++n)r.push("a"+n),t.push("o"+n);var e=["function getOrientation(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=NUM_EXPAND;++n)e.push("case ",n,":return o",n,"(",r.slice(0,n).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(e.join(""));var o=Function.apply(void 0,t);module.exports=o.apply(void 0,[slowOrient].concat(CACHED));for(n=0;n<=NUM_EXPAND;++n)module.exports[n]=CACHED[n]}generateOrientationProc();

},{"24":24,"25":25,"26":26,"33":33}],24:[function(require,module,exports){
"use strict";var twoProduct=require(33),twoSum=require(34);function scaleLinearExpansion(r,t){var o=r.length;if(1===o){var e=twoProduct(r[0],t);return e[0]?e:[e[1]]}var u=new Array(2*o),a=[.1,.1],n=[.1,.1],c=0;twoProduct(r[0],t,a),a[0]&&(u[c++]=a[0]);for(var i=1;i<o;++i){twoProduct(r[i],t,n);var w=a[1];twoSum(w,n[0],a),a[0]&&(u[c++]=a[0]);var s=n[1],v=a[1],d=s+v,l=v-(d-s);a[1]=d,l&&(u[c++]=l)}return a[1]&&(u[c++]=a[1]),0===c&&(u[c++]=0),u.length=c,u}module.exports=scaleLinearExpansion;

},{"33":33,"34":34}],25:[function(require,module,exports){
"use strict";function scalarScalar(r,t){var a=r+t,n=a-r,u=r-(a-n)+(t-n);return u?[u,a]:[a]}function robustSubtract(r,t){var a=0|r.length,n=0|t.length;if(1===a&&1===n)return scalarScalar(r[0],-t[0]);var u,e,c=new Array(a+n),o=0,l=0,s=0,f=Math.abs,b=r[l],h=f(b),i=-t[s],v=f(i);h<v?(e=b,(l+=1)<a&&(h=f(b=r[l]))):(e=i,(s+=1)<n&&(v=f(i=-t[s]))),l<a&&h<v||s>=n?(u=b,(l+=1)<a&&(h=f(b=r[l]))):(u=i,(s+=1)<n&&(v=f(i=-t[s])));for(var S,g,d=u+e,m=d-u,p=e-m,w=p,x=d;l<a&&s<n;)h<v?(u=b,(l+=1)<a&&(h=f(b=r[l]))):(u=i,(s+=1)<n&&(v=f(i=-t[s]))),(p=(e=w)-(m=(d=u+e)-u))&&(c[o++]=p),w=x-((S=x+d)-(g=S-x))+(d-g),x=S;for(;l<a;)(p=(e=w)-(m=(d=(u=b)+e)-u))&&(c[o++]=p),w=x-((S=x+d)-(g=S-x))+(d-g),x=S,(l+=1)<a&&(b=r[l]);for(;s<n;)(p=(e=w)-(m=(d=(u=i)+e)-u))&&(c[o++]=p),w=x-((S=x+d)-(g=S-x))+(d-g),x=S,(s+=1)<n&&(i=-t[s]);return w&&(c[o++]=w),x&&(c[o++]=x),o||(c[o++]=0),c.length=o,c}module.exports=robustSubtract;

},{}],26:[function(require,module,exports){
"use strict";function scalarScalar(r,a){var n=r+a,e=n-r,t=r-(n-e)+(a-e);return t?[t,n]:[n]}function linearExpansionSum(r,a){var n=0|r.length,e=0|a.length;if(1===n&&1===e)return scalarScalar(r[0],a[0]);var t,l,o=new Array(n+e),u=0,i=0,s=0,c=Math.abs,f=r[i],h=c(f),v=a[s],S=c(v);h<S?(l=f,(i+=1)<n&&(h=c(f=r[i]))):(l=v,(s+=1)<e&&(S=c(v=a[s]))),i<n&&h<S||s>=e?(t=f,(i+=1)<n&&(h=c(f=r[i]))):(t=v,(s+=1)<e&&(S=c(v=a[s])));for(var g,m,p=t+l,x=p-t,E=l-x,b=E,d=p;i<n&&s<e;)h<S?(t=f,(i+=1)<n&&(h=c(f=r[i]))):(t=v,(s+=1)<e&&(S=c(v=a[s]))),(E=(l=b)-(x=(p=t+l)-t))&&(o[u++]=E),b=d-((g=d+p)-(m=g-d))+(p-m),d=g;for(;i<n;)(E=(l=b)-(x=(p=(t=f)+l)-t))&&(o[u++]=E),b=d-((g=d+p)-(m=g-d))+(p-m),d=g,(i+=1)<n&&(f=r[i]);for(;s<e;)(E=(l=b)-(x=(p=(t=v)+l)-t))&&(o[u++]=E),b=d-((g=d+p)-(m=g-d))+(p-m),d=g,(s+=1)<e&&(v=a[s]);return b&&(o[u++]=b),d&&(o[u++]=d),u||(o[u++]=0),o.length=u,o}module.exports=linearExpansionSum;

},{}],27:[function(require,module,exports){
"use strict";var rectangle=require(29),bbox=function(e,o){if(o&&o.bbox)return{leaf:o,x:o.bbox[0],y:o.bbox[1],w:o.bbox[2]-o.bbox[0],h:o.bbox[3]-o.bbox[1]};for(var t=e.length,r=0,n=new Array(t);r<t;)n[r]=[e[r][0],e[r][1]],r++;var a=n[0];t=n.length,r=1;for(var i={min:[].concat(a),max:[].concat(a)};r<t;)n[r][0]<i.min[0]?i.min[0]=n[r][0]:n[r][0]>i.max[0]&&(i.max[0]=n[r][0]),n[r][1]<i.min[1]?i.min[1]=n[r][1]:n[r][1]>i.max[1]&&(i.max[1]=n[r][1]),r++;var c={x:i.min[0],y:i.min[1],w:i.max[0]-i.min[0],h:i.max[1]-i.min[1]};return o&&(c.leaf=o),c},geoJSON={point:function(e,o){return o.insertSubtree({x:e.geometry.coordinates[0],y:e.geometry.coordinates[1],w:0,h:0,leaf:e},o.root)},multiPointLineString:function(e,o){return o.insertSubtree(bbox(e.geometry.coordinates,e),o.root)},multiLineStringPolygon:function(e,o){return o.insertSubtree(bbox(Array.prototype.concat.apply([],e.geometry.coordinates),e),o.root)},multiPolygon:function(e,o){return o.insertSubtree(bbox(Array.prototype.concat.apply([],Array.prototype.concat.apply([],e.geometry.coordinates)),e),o.root)},makeRec:function(e){return rectangle(e.x,e.y,e.w,e.h)},geometryCollection:function(e,o){if(e.bbox)return o.insertSubtree({leaf:e,x:e.bbox[0],y:e.bbox[1],w:e.bbox[2]-e.bbox[0],h:e.bbox[3]-e.bbox[1]},o.root);for(var t,r=e.geometry.geometries,n=0,a=r.length,i=[];n<a;){switch((t=r[n]).type){case"Point":i.push(geoJSON.makeRec({x:t.coordinates[0],y:t.coordinates[1],w:0,h:0}));break;case"MultiPoint":case"LineString":i.push(geoJSON.makeRec(bbox(t.coordinates)));break;case"MultiLineString":case"Polygon":i.push(geoJSON.makeRec(bbox(Array.prototype.concat.apply([],t.coordinates))));break;case"MultiPolygon":i.push(geoJSON.makeRec(bbox(Array.prototype.concat.apply([],Array.prototype.concat.apply([],t.coordinates)))));break;case"GeometryCollection":a=(r=r.concat(t.geometries)).length}n++}var c=i[0];for(n=1,a=i.length;n<a;)c.expand(i[n]),n++;return o.insertSubtree({leaf:e,x:c.x(),y:c.y(),h:c.h(),w:c.w()},o.root)}};exports.geoJSON=function(e){var o,t;if(Array.isArray(e))o=e.slice();else if(e.features&&Array.isArray(e.features))o=e.features.slice();else{if(!(e instanceof Object))throw"this isn't what we're looking for";o=[e]}for(var r=o.length,n=0;n<r;){if("Feature"===(t=o[n]).type)switch(t.geometry.type){case"Point":geoJSON.point(t,this);break;case"MultiPoint":case"LineString":geoJSON.multiPointLineString(t,this);break;case"MultiLineString":case"Polygon":geoJSON.multiLineStringPolygon(t,this);break;case"MultiPolygon":geoJSON.multiPolygon(t,this);break;case"GeometryCollection":geoJSON.geometryCollection(t,this)}n++}},exports.bbox=function(){var e,o,t,r;switch(arguments.length){case 1:e=arguments[0][0][0],o=arguments[0][0][1],t=arguments[0][1][0],r=arguments[0][1][1];break;case 2:e=arguments[0][0],o=arguments[0][1],t=arguments[1][0],r=arguments[1][1];break;case 4:e=arguments[0],o=arguments[1],t=arguments[2],r=arguments[3]}return this.search({x:e,y:o,w:t-e,h:r-o})};

},{"29":29}],28:[function(require,module,exports){
"use strict";var RTree=require(30),geojson=require(27);RTree.prototype.bbox=geojson.bbox,RTree.prototype.geoJSON=geojson.geoJSON,RTree.Rectangle=require(29),module.exports=RTree;

},{"27":27,"29":29,"30":30}],29:[function(require,module,exports){
"use strict";function Rectangle(n,t,e,r){if(!(this instanceof Rectangle))return new Rectangle(n,t,e,r);var x,i,u;n.x?(e=n.w,r=n.h,t=n.y,0!==n.w&&!n.w&&n.x2?(e=n.x2-n.x,r=n.y2-n.y):(e=n.w,r=n.h),n=n.x,x=n+e,i=t+r,u=!(r+e)):(x=n+e,i=t+r,u=!(r+e)),this.x1=this.x=function(){return n},this.y1=this.y=function(){return t},this.x2=function(){return x},this.y2=function(){return i},this.w=function(){return e},this.h=function(){return r},this.p=function(){return u},this.overlap=function(e){return u||e.p()?n<=e.x2()&&x>=e.x()&&t<=e.y2()&&i>=e.y():n<e.x2()&&x>e.x()&&t<e.y2()&&i>e.y()},this.expand=function(u){var y,c,h=u.x(),a=u.y(),o=u.x2(),f=u.y2();return y=n>h?h:n,c=t>a?a:t,e=x>o?x-y:o-y,r=i>f?i-c:f-c,n=y,t=c,this}}Rectangle.overlapRectangle=function(n,t){return 0===n.h&&0===n.w||0===t.h&&0===t.w?n.x<=t.x+t.w&&n.x+n.w>=t.x&&n.y<=t.y+t.h&&n.y+n.h>=t.y:n.x<t.x+t.w&&n.x+n.w>t.x&&n.y<t.y+t.h&&n.y+n.h>t.y},Rectangle.containsRectangle=function(n,t){return n.x+n.w<=t.x+t.w&&n.x>=t.x&&n.y+n.h<=t.y+t.h&&n.y>=t.y},Rectangle.expandRectangle=function(n,t){var e,r,x=n.x+n.w,i=t.x+t.w,u=n.y+n.h,y=t.y+t.h;return e=n.x>t.x?t.x:n.x,r=n.y>t.y?t.y:n.y,n.w=x>i?x-e:i-e,n.h=u>y?u-r:y-r,n.x=e,n.y=r,n},Rectangle.makeMBR=function(n,t){if(!n.length)return{x:0,y:0,w:0,h:0};(t=t||{}).x=n[0].x,t.y=n[0].y,t.w=n[0].w,t.h=n[0].h;for(var e=1,r=n.length;e<r;e++)Rectangle.expandRectangle(t,n[e]);return t},Rectangle.squarifiedRatio=function(n,t,e){var r=(n+t)/2,x=n*t;return x*e/(x/(r*r))},module.exports=Rectangle;

},{}],30:[function(require,module,exports){
"use strict";var rectangle=require(29);function RTree(e){if(!(this instanceof RTree))return new RTree(e);var n=3,t=6;isNaN(e)||(n=Math.floor(e/2),t=e);var r={x:0,y:0,w:0,h:0,id:"root",nodes:[]};this.root=r;var a=function(e){for(var n,t=e.slice(),r=[];t.length;)(n=t.pop()).nodes?t=t.concat(n.nodes):n.leaf&&r.push(n);return r},s=function(e,t,r){var s,o,h,i=[],d=[],g=[];if(!e||!rectangle.overlapRectangle(e,r))return g;var f={x:e.x,y:e.y,w:e.w,h:e.h,target:t};for(d.push(r.nodes.length),i.push(r);i.length>0;){if(s=i.pop(),o=d.pop()-1,"target"in f)for(;o>=0;){if(h=s.nodes[o],rectangle.overlapRectangle(f,h)){if(f.target&&"leaf"in h&&h.leaf===f.target||!f.target&&("leaf"in h||rectangle.containsRectangle(h,f))){g="nodes"in h?a(s.nodes.splice(o,1)):s.nodes.splice(o,1),rectangle.makeMBR(s.nodes,s),delete f.target;break}"nodes"in h&&(0,d.push(o),i.push(s),s=h,o=h.nodes.length)}o--}else if("nodes"in f){s.nodes.splice(o+1,1),s.nodes.length>0&&rectangle.makeMBR(s.nodes,s);for(var u=0;u<f.nodes.length;u++)c(f.nodes[u],s);f.nodes=[],0===i.length&&s.nodes.length<=1?(f.nodes=l(s,!0,f.nodes,s),s.nodes=[],i.push(s),d.push(1)):i.length>0&&s.nodes.length<n?(f.nodes=l(s,!0,f.nodes,s),s.nodes=[]):delete f.nodes}else rectangle.makeMBR(s.nodes,s);1}return g},o=function(e){for(var n=i(e);e.length>0;)h(e,n[0],n[1]);return n},h=function(e,t,r){for(var a,s,o,h=rectangle.squarifiedRatio(t.w,t.h,t.nodes.length+1),i=rectangle.squarifiedRatio(r.w,r.h,r.nodes.length+1),l=e.length-1;l>=0;l--){var c=e[l],d={};d.x=Math.min(t.x,c.x),d.y=Math.min(t.y,c.y),d.w=Math.max(t.x+t.w,c.x+c.w)-d.x,d.h=Math.max(t.y+t.h,c.y+c.h)-d.y;var g=Math.abs(rectangle.squarifiedRatio(d.w,d.h,t.nodes.length+2)-h),f={};f.x=Math.min(r.x,c.x),f.y=Math.min(r.y,c.y),f.w=Math.max(r.x+r.w,c.x+c.w)-f.x,f.h=Math.max(r.y+r.h,c.y+c.h)-f.y;var u=Math.abs(rectangle.squarifiedRatio(f.w,f.h,r.nodes.length+2)-i);(!s||!a||Math.abs(u-g)<a)&&(s=l,a=Math.abs(u-g),o=u<g?r:t)}var p=e.splice(s,1)[0];t.nodes.length+e.length+1<=n?(t.nodes.push(p),rectangle.expandRectangle(t,p)):r.nodes.length+e.length+1<=n?(r.nodes.push(p),rectangle.expandRectangle(r,p)):(o.nodes.push(p),rectangle.expandRectangle(o,p))},i=function(e){for(var n,t,r=e.length-1,a=0,s=e.length-1,o=0,h=e.length-2;h>=0;h--){var i=e[h];i.x>e[a].x?a=h:i.x+i.w<e[r].x+e[r].w&&(r=h),i.y>e[o].y?o=h:i.y+i.h<e[s].y+e[s].h&&(s=h)}return Math.abs(e[r].x+e[r].w-e[a].x)>Math.abs(e[s].y+e[s].h-e[o].y)?r>a?(n=e.splice(r,1)[0],t=e.splice(a,1)[0]):(t=e.splice(a,1)[0],n=e.splice(r,1)[0]):s>o?(n=e.splice(s,1)[0],t=e.splice(o,1)[0]):(t=e.splice(o,1)[0],n=e.splice(s,1)[0]),[{x:n.x,y:n.y,w:n.w,h:n.h,nodes:[n]},{x:t.x,y:t.y,w:t.w,h:t.h,nodes:[t]}]},l=function(e,n,t,r){var a=[];if(!rectangle.overlapRectangle(e,r))return t;for(a.push(r.nodes);a.length>0;)for(var s=a.pop(),o=s.length-1;o>=0;o--){var h=s[o];rectangle.overlapRectangle(e,h)&&("nodes"in h?a.push(h.nodes):"leaf"in h&&(n?t.push(h):t.push(h.leaf)))}return t},c=function(e,n){var r;if(0===n.nodes.length)return n.x=e.x,n.y=e.y,n.w=e.w,n.h=e.h,void n.nodes.push(e);for(var a,s=function(e,n){var t,r=-1,a=[],s=!0;a.push(n);for(var o=n.nodes;s||-1!==r;){s?s=!1:(a.push(o[r]),o=o[r].nodes,r=-1);for(var h=o.length-1;h>=0;h--){var i=o[h];if("leaf"in i){r=-1;break}var l=rectangle.squarifiedRatio(i.w,i.h,i.nodes.length+1),c=Math.max(i.x+i.w,e.x+e.w)-Math.min(i.x,e.x),d=Math.max(i.y+i.h,e.y+e.h)-Math.min(i.y,e.y),g=rectangle.squarifiedRatio(c,d,i.nodes.length+2);(r<0||Math.abs(g-l)<t)&&(t=Math.abs(g-l),r=h)}}return a}(e,n),h=e;s.length>0;){if(r&&"nodes"in r&&0===r.nodes.length){a=r,r=s.pop();for(var i=0;i<r.nodes.length;i++)if(r.nodes[i]===a||0===r.nodes[i].nodes.length){r.nodes.splice(i,1);break}}else r=s.pop();if("leaf"in h||"nodes"in h||Array.isArray(h)){if(Array.isArray(h)){for(var l=0;l<h.length;l++)rectangle.expandRectangle(r,h[l]);r.nodes=r.nodes.concat(h)}else rectangle.expandRectangle(r,h),r.nodes.push(h);if(r.nodes.length<=t)h={x:r.x,y:r.y,w:r.w,h:r.h};else{var c=o(r.nodes);h=c,s.length<1&&(r.nodes.push(c[0]),s.push(r),h=c[1])}}else rectangle.expandRectangle(r,h),h={x:r.x,y:r.y,w:r.w,h:r.h}}};this.insertSubtree=c,this.getTree=function(){return r},this.setTree=function(e,n){return n||(n=r),a=e,(t=n).nodes=a.nodes,t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h,t;var t,a},this.search=function(e,n,t){return l(e,n,t=t||[],r)};this.remove=function(e,n){return n&&"function"!=typeof n?function(e,n){return s(e,n,r)}(e,n):function(e){for(var n,t=1,a=[];t>0;)t=(n=s(e,!1,r)).length,a=a.concat(n);return a}(e)},this.insert=function(e,n){return c({x:e.x,y:e.y,w:e.w,h:e.h,leaf:n},r)}}RTree.prototype.toJSON=function(e){return JSON.stringify(this.root,!1,e)},RTree.fromJSON=function(e){var n=new RTree;return n.setTree(JSON.parse(e)),n},module.exports=RTree,"function"!=typeof Array.isArray&&(Array.isArray=function(e){return"object"==typeof e&&"[object Array]"==={}.toString.call(e)});

},{"29":29}],31:[function(require,module,exports){
!function(){"use strict";var r=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,t=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function i(r){var e;e="function"==typeof r?r:r?function(){var r=0,e=0,t=0,a=1,o=(i=4022871197,function(r){r=r.toString();for(var e=0;e<r.length;e++){var t=.02519603282416938*(i+=r.charCodeAt(e));t-=i=t>>>0,i=(t*=i)>>>0,i+=4294967296*(t-=i)}return 2.3283064365386963e-10*(i>>>0)});var i;r=o(" "),e=o(" "),t=o(" ");for(var n=0;n<arguments.length;n++)(r-=o(arguments[n]))<0&&(r+=1),(e-=o(arguments[n]))<0&&(e+=1),(t-=o(arguments[n]))<0&&(t+=1);return o=null,function(){var o=2091639*r+2.3283064365386963e-10*a;return r=e,e=t,t=o-(a=0|o)}}(r):Math.random,this.p=n(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var t=0;t<512;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}function n(r){var e,t=new Uint8Array(256);for(e=0;e<256;e++)t[e]=e;for(e=0;e<255;e++){var a=e+~~(r()*(256-e)),o=t[e];t[e]=t[a],t[a]=o}return t}i.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,a){var o,i,n=this.permMod12,f=this.perm,s=this.grad3,v=0,h=0,l=0,u=(t+a)*r,d=Math.floor(t+u),p=Math.floor(a+u),M=(d+p)*e,m=t-(d-M),c=a-(p-M);m>c?(o=1,i=0):(o=0,i=1);var y=m-o+e,w=c-i+e,g=m-1+2*e,A=c-1+2*e,x=255&d,q=255&p,D=.5-m*m-c*c;if(D>=0){var S=3*n[x+f[q]];v=(D*=D)*D*(s[S]*m+s[S+1]*c)}var U=.5-y*y-w*w;if(U>=0){var b=3*n[x+o+f[q+i]];h=(U*=U)*U*(s[b]*y+s[b+1]*w)}var F=.5-g*g-A*A;if(F>=0){var N=3*n[x+1+f[q+1]];l=(F*=F)*F*(s[N]*g+s[N+1]*A)}return 70*(v+h+l)},noise3D:function(r,e,a){var o,i,n,f,s,v,h,l,u,d,p=this.permMod12,M=this.perm,m=this.grad3,c=(r+e+a)*(1/3),y=Math.floor(r+c),w=Math.floor(e+c),g=Math.floor(a+c),A=(y+w+g)*t,x=r-(y-A),q=e-(w-A),D=a-(g-A);x>=q?q>=D?(s=1,v=0,h=0,l=1,u=1,d=0):x>=D?(s=1,v=0,h=0,l=1,u=0,d=1):(s=0,v=0,h=1,l=1,u=0,d=1):q<D?(s=0,v=0,h=1,l=0,u=1,d=1):x<D?(s=0,v=1,h=0,l=0,u=1,d=1):(s=0,v=1,h=0,l=1,u=1,d=0);var S=x-s+t,U=q-v+t,b=D-h+t,F=x-l+2*t,N=q-u+2*t,C=D-d+2*t,P=x-1+.5,T=q-1+.5,_=D-1+.5,j=255&y,k=255&w,z=255&g,B=.6-x*x-q*q-D*D;if(B<0)o=0;else{var E=3*p[j+M[k+M[z]]];o=(B*=B)*B*(m[E]*x+m[E+1]*q+m[E+2]*D)}var G=.6-S*S-U*U-b*b;if(G<0)i=0;else{var H=3*p[j+s+M[k+v+M[z+h]]];i=(G*=G)*G*(m[H]*S+m[H+1]*U+m[H+2]*b)}var I=.6-F*F-N*N-C*C;if(I<0)n=0;else{var J=3*p[j+l+M[k+u+M[z+d]]];n=(I*=I)*I*(m[J]*F+m[J+1]*N+m[J+2]*C)}var K=.6-P*P-T*T-_*_;if(K<0)f=0;else{var L=3*p[j+1+M[k+1+M[z+1]]];f=(K*=K)*K*(m[L]*P+m[L+1]*T+m[L+2]*_)}return 32*(o+i+n+f)},noise4D:function(r,e,t,i){var n,f,s,v,h,l,u,d,p,M,m,c,y,w,g,A,x,q=this.perm,D=this.grad4,S=(r+e+t+i)*a,U=Math.floor(r+S),b=Math.floor(e+S),F=Math.floor(t+S),N=Math.floor(i+S),C=(U+b+F+N)*o,P=r-(U-C),T=e-(b-C),_=t-(F-C),j=i-(N-C),k=0,z=0,B=0,E=0;P>T?k++:z++,P>_?k++:B++,P>j?k++:E++,T>_?z++:B++,T>j?z++:E++,_>j?B++:E++;var G=P-(l=k>=3?1:0)+o,H=T-(u=z>=3?1:0)+o,I=_-(d=B>=3?1:0)+o,J=j-(p=E>=3?1:0)+o,K=P-(M=k>=2?1:0)+2*o,L=T-(m=z>=2?1:0)+2*o,O=_-(c=B>=2?1:0)+2*o,Q=j-(y=E>=2?1:0)+2*o,R=P-(w=k>=1?1:0)+3*o,V=T-(g=z>=1?1:0)+3*o,W=_-(A=B>=1?1:0)+3*o,X=j-(x=E>=1?1:0)+3*o,Y=P-1+4*o,Z=T-1+4*o,$=_-1+4*o,rr=j-1+4*o,er=255&U,tr=255&b,ar=255&F,or=255&N,ir=.6-P*P-T*T-_*_-j*j;if(ir<0)n=0;else{var nr=q[er+q[tr+q[ar+q[or]]]]%32*4;n=(ir*=ir)*ir*(D[nr]*P+D[nr+1]*T+D[nr+2]*_+D[nr+3]*j)}var fr=.6-G*G-H*H-I*I-J*J;if(fr<0)f=0;else{var sr=q[er+l+q[tr+u+q[ar+d+q[or+p]]]]%32*4;f=(fr*=fr)*fr*(D[sr]*G+D[sr+1]*H+D[sr+2]*I+D[sr+3]*J)}var vr=.6-K*K-L*L-O*O-Q*Q;if(vr<0)s=0;else{var hr=q[er+M+q[tr+m+q[ar+c+q[or+y]]]]%32*4;s=(vr*=vr)*vr*(D[hr]*K+D[hr+1]*L+D[hr+2]*O+D[hr+3]*Q)}var lr=.6-R*R-V*V-W*W-X*X;if(lr<0)v=0;else{var ur=q[er+w+q[tr+g+q[ar+A+q[or+x]]]]%32*4;v=(lr*=lr)*lr*(D[ur]*R+D[ur+1]*V+D[ur+2]*W+D[ur+3]*X)}var dr=.6-Y*Y-Z*Z-$*$-rr*rr;if(dr<0)h=0;else{var pr=q[er+1+q[tr+1+q[ar+1+q[or+1]]]]%32*4;h=(dr*=dr)*dr*(D[pr]*Y+D[pr+1]*Z+D[pr+2]*$+D[pr+3]*rr)}return 27*(n+f+s+v+h)}},i._buildPermutationTable=n,"undefined"!=typeof define&&define.amd&&define(function(){return i}),"undefined"!=typeof exports?exports.SimplexNoise=i:"undefined"!=typeof window&&(window.SimplexNoise=i),"undefined"!=typeof module&&(module.exports=i)}();

},{}],32:[function(require,module,exports){
"use strict";var bits=require(7),UnionFind=require(35);function dimension(e){for(var n=0,r=Math.max,t=0,o=e.length;t<o;++t)n=r(n,e[t].length);return n-1}function countVertices(e){for(var n=-1,r=Math.max,t=0,o=e.length;t<o;++t)for(var l=e[t],i=0,a=l.length;i<a;++i)n=r(n,l[i]);return n+1}function cloneCells(e){for(var n=new Array(e.length),r=0,t=e.length;r<t;++r)n[r]=e[r].slice(0);return n}function compareCells(e,n){var r=e.length,t=e.length-n.length,o=Math.min;if(t)return t;switch(r){case 0:return 0;case 1:return e[0]-n[0];case 2:return(a=e[0]+e[1]-n[0]-n[1])||o(e[0],e[1])-o(n[0],n[1]);case 3:var l=e[0]+e[1],i=n[0]+n[1];if(a=l+e[2]-(i+n[2]))return a;var a,s=o(e[0],e[1]),u=o(n[0],n[1]);return(a=o(s,e[2])-o(u,n[2]))||o(s+e[2],l)-o(u+n[2],i);default:var f=e.slice(0);f.sort();var c=n.slice(0);c.sort();for(var h=0;h<r;++h)if(t=f[h]-c[h])return t;return 0}}function compareZipped(e,n){return compareCells(e[0],n[0])}function normalize(e,n){if(n){for(var r=e.length,t=new Array(r),o=0;o<r;++o)t[o]=[e[o],n[o]];t.sort(compareZipped);for(o=0;o<r;++o)e[o]=t[o][0],n[o]=t[o][1];return e}return e.sort(compareCells),e}function unique(e){if(0===e.length)return[];for(var n=1,r=e.length,t=1;t<r;++t){var o=e[t];if(compareCells(o,e[t-1])){if(t===n){n++;continue}e[n++]=o}}return e.length=n,e}function findCell(e,n){for(var r=0,t=e.length-1,o=-1;r<=t;){var l=r+t>>1,i=compareCells(e[l],n);i<=0?(0===i&&(o=l),r=l+1):i>0&&(t=l-1)}return o}function incidence(e,n){for(var r=new Array(e.length),t=0,o=r.length;t<o;++t)r[t]=[];for(var l=[],i=(t=0,n.length);t<i;++t)for(var a=n[t],s=a.length,u=1,f=1<<s;u<f;++u){l.length=bits.popCount(u);for(var c=0,h=0;h<s;++h)u&1<<h&&(l[c++]=a[h]);var p=findCell(e,l);if(!(p<0))for(;r[p++].push(t),!(p>=e.length||0!==compareCells(e[p],l)););}return r}function dual(e,n){if(!n)return incidence(unique(skeleton(e,0)),e,0);for(var r=new Array(n),t=0;t<n;++t)r[t]=[];t=0;for(var o=e.length;t<o;++t)for(var l=e[t],i=0,a=l.length;i<a;++i)r[l[i]].push(t);return r}function explode(e){for(var n=[],r=0,t=e.length;r<t;++r)for(var o=e[r],l=0|o.length,i=1,a=1<<l;i<a;++i){for(var s=[],u=0;u<l;++u)i>>>u&1&&s.push(o[u]);n.push(s)}return normalize(n)}function skeleton(e,n){if(n<0)return[];for(var r=[],t=(1<<n+1)-1,o=0;o<e.length;++o)for(var l=e[o],i=t;i<1<<l.length;i=bits.nextCombination(i)){for(var a=new Array(n+1),s=0,u=0;u<l.length;++u)i&1<<u&&(a[s++]=l[u]);r.push(a)}return normalize(r)}function boundary(e){for(var n=[],r=0,t=e.length;r<t;++r)for(var o=e[r],l=0,i=o.length;l<i;++l){for(var a=new Array(o.length-1),s=0,u=0;s<i;++s)s!==l&&(a[u++]=o[s]);n.push(a)}return normalize(n)}function connectedComponents_dense(e,n){for(var r=new UnionFind(n),t=0;t<e.length;++t)for(var o=e[t],l=0;l<o.length;++l)for(var i=l+1;i<o.length;++i)r.link(o[l],o[i]);var a=[],s=r.ranks;for(t=0;t<s.length;++t)s[t]=-1;for(t=0;t<e.length;++t){var u=r.find(e[t][0]);s[u]<0?(s[u]=a.length,a.push([e[t].slice(0)])):a[s[u]].push(e[t].slice(0))}return a}function connectedComponents_sparse(e){for(var n=unique(normalize(skeleton(e,0))),r=new UnionFind(n.length),t=0;t<e.length;++t)for(var o=e[t],l=0;l<o.length;++l)for(var i=findCell(n,[o[l]]),a=l+1;a<o.length;++a)r.link(i,findCell(n,[o[a]]));var s=[],u=r.ranks;for(t=0;t<u.length;++t)u[t]=-1;for(t=0;t<e.length;++t){var f=r.find(findCell(n,[e[t][0]]));u[f]<0?(u[f]=s.length,s.push([e[t].slice(0)])):s[u[f]].push(e[t].slice(0))}return s}function connectedComponents(e,n){return n?connectedComponents_dense(e,n):connectedComponents_sparse(e)}exports.dimension=dimension,exports.countVertices=countVertices,exports.cloneCells=cloneCells,exports.compareCells=compareCells,exports.normalize=normalize,exports.unique=unique,exports.findCell=findCell,exports.incidence=incidence,exports.dual=dual,exports.explode=explode,exports.skeleton=skeleton,exports.boundary=boundary,exports.connectedComponents=connectedComponents;

},{"35":35,"7":7}],33:[function(require,module,exports){
"use strict";module.exports=twoProduct;var SPLITTER=+(Math.pow(2,27)+1);function twoProduct(t,o,r){var u=t*o,T=SPLITTER*t,P=T-(T-t),c=t-P,e=SPLITTER*o,a=e-(e-o),d=o-a,n=c*d-(u-P*a-c*a-P*d);return r?(r[0]=n,r[1]=u,r):[n,u]}

},{}],34:[function(require,module,exports){
"use strict";function fastTwoSum(t,u,o){var r=t+u,s=r-t,e=u-s,a=t-(r-s);return o?(o[0]=a+e,o[1]=r,o):[a+e,r]}module.exports=fastTwoSum;

},{}],35:[function(require,module,exports){
"use strict";function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var r=0;r<t;++r)this.roots[r]=r,this.ranks[r]=0}module.exports=UnionFind;var proto=UnionFind.prototype;Object.defineProperty(proto,"length",{get:function(){return this.roots.length}}),proto.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},proto.find=function(t){for(var r=t,o=this.roots;o[t]!==t;)t=o[t];for(;o[r]!==t;){var n=o[r];o[r]=t,r=n}return t},proto.link=function(t,r){var o=this.find(t),n=this.find(r);if(o!==n){var i=this.ranks,s=this.roots,e=i[o],h=i[n];e<h?s[o]=n:h<e?s[n]=o:(s[n]=o,++i[o])}};

},{}],36:[function(require,module,exports){
"use strict";function unique_pred(n,e){for(var u=1,t=n.length,i=n[0],r=n[0],o=1;o<t;++o)if(r=i,e(i=n[o],r)){if(o===u){u++;continue}n[u++]=i}return n.length=u,n}function unique_eq(n){for(var e=1,u=n.length,t=n[0],i=n[0],r=1;r<u;++r,i=t)if(i=t,(t=n[r])!==i){if(r===e){e++;continue}n[e++]=t}return n.length=e,n}function unique(n,e,u){return 0===n.length?n:e?(u||n.sort(e),unique_pred(n,e)):(u||n.sort(),unique_eq(n))}module.exports=unique;

},{}],37:[function(require,module,exports){
var vec2={create:require(13),add:require(11),dot:require(15),sub:require(20),scale:require(18),distance:require(14)};module.exports=require(38)(vec2);

},{"11":11,"13":13,"14":14,"15":15,"18":18,"20":20,"38":38}],38:[function(require,module,exports){
module.exports=function(s){var t=s.create(),i=s.create();function e(t,i){if(!t||2!==t.length)throw new Error("two points must be specified for the constraint");if(!t[0].position||!t[1].position)throw new Error("must specify verlet-point or similar, with { position }");this.points=t,this.stiffness=1,i&&"number"==typeof i.stiffness&&(this.stiffness=i.stiffness),i&&"number"==typeof i.restingDistance?this.restingDistance=i.restingDistance:this.restingDistance=s.distance(this.points[0].position,this.points[1].position)}return e.prototype.solve=function(){var e=this.points[0],n=this.points[1],o=e.position,r=n.position,f="number"==typeof e.mass?e.mass:1,a="number"==typeof n.mass?n.mass:1;s.sub(t,o,r);var p,h,c=Math.sqrt(s.dot(t,t)),u=0===c?this.restingDistance:(this.restingDistance-c)/c;if(0==f&&0==a)p=0,h=0;else if(0==f&&a>0)p=0,h=this.stiffness;else if(f>0&&0==a)p=this.stiffness,h=0;else{var m=1/f;p=m/(m+1/a)*this.stiffness,h=this.stiffness-p}return s.scale(i,t,p*u),s.add(o,o,i),s.scale(i,t,h*u),s.sub(r,r,i),c},function(s,t,i){return new e(s,t,i)}};

},{}],39:[function(require,module,exports){
var vec2={create:require(13),sub:require(20),copy:require(12)};module.exports=require(40)(vec2);

},{"12":12,"13":13,"20":20,"40":40}],40:[function(require,module,exports){
module.exports=function(i){function t(t){this.position=i.create(),this.previous=i.create(),this.acceleration=i.create(),this.mass=1,this.radius=0,t&&"number"==typeof t.mass&&(this.mass=t.mass),t&&"number"==typeof t.radius&&(this.radius=t.radius),t&&t.position&&i.copy(this.position,t.position),t&&(t.previous||t.position)&&i.copy(this.previous,t.previous||t.position),t&&t.acceleration&&i.copy(this.acceleration,t.acceleration)}return t.prototype.addForce=function(t){return i.sub(this.previous,this.previous,t),this},t.prototype.place=function(t){return i.copy(this.position,t),i.copy(this.previous,t),this},function(i){return new t(i)}};

},{}],41:[function(require,module,exports){
var vec2={create:require(13),add:require(11),multiply:require(17),sub:require(20),scale:require(18),copy:require(12),sqrLen:require(19),fromValues:require(16)};module.exports=require(43)(vec2);

},{"11":11,"12":12,"13":13,"16":16,"17":17,"18":18,"19":19,"20":20,"43":43}],42:[function(require,module,exports){
module.exports=function(o){var r=o.fromValues(-1/0,-1/0,-1/0),e=o.fromValues(1/0,1/0,1/0),i=o.fromValues(1,1,1),t=o.create();return function(n,s,a,f,u){if(a||f){o.copy(t,i),a=a||r,f=f||e;var p=0,l=n.position.length,m=!1,c=n.radius||0;for(p=0;p<l;p++)"number"==typeof a[p]&&n.position[p]-c<a[p]&&(t[p]=-1,n.position[p]=a[p]+c,m=!0);for(p=0;p<l;p++)"number"==typeof f[p]&&n.position[p]+c>f[p]&&(t[p]=-1,n.position[p]=f[p]-c,m=!0);var v=o.sqrLen(s);if(m&&!(v<=1e-6)){var y=Math.sqrt(v);0!==y&&o.scale(s,s,1/y),o.scale(t,t,y*u),o.multiply(s,s,t)}}}};

},{}],43:[function(require,module,exports){
var number=require(6),clamp=require(8),createCollider=require(42);module.exports=function(i){var e=createCollider(i),t=i.create(),o=i.create(),n=i.create();function r(e){if(!(this instanceof r))return new r(e);e=e||{},this.gravity=e.gravity||i.create(),this.friction=number(e.friction,.98),this.min=e.min,this.max=e.max,this.bounce=number(e.bounce,1)}return r.prototype.collision=function(i,t){e(i,t,this.min,this.max,this.bounce)},r.prototype.integratePoint=function(e,r){var a="number"==typeof e.mass?e.mass:1;if(0===a)return this.collision(e,n),void i.copy(e.acceleration,n);i.add(e.acceleration,e.acceleration,this.gravity),i.scale(e.acceleration,e.acceleration,a),i.sub(t,e.position,e.previous),i.scale(t,t,this.friction),this.collision(e,t),i.copy(e.previous,e.position);var c=r*r;i.scale(o,e.acceleration,.5*c),i.add(e.position,e.position,t),i.add(e.position,e.position,o),i.copy(e.acceleration,n)},r.prototype.integrate=function(i,e){for(var t=0;t<i.length;t++)this.integratePoint(i[t],e)},r};

},{"42":42,"6":6,"8":8}]},{},[1])
//# sourceMappingURL=bundle.js.map
